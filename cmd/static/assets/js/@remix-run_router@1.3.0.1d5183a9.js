/**
 * @remix-run/router v1.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},t.apply(this,arguments)}var e,n;(n=e||(e={})).Pop="POP",n.Push="PUSH",n.Replace="REPLACE";const a="popstate";function r(n){return void 0===n&&(n={}),function(n,r,c,u){void 0===u&&(u={});let{window:p=document.defaultView,v5Compat:d=!1}=u,f=p.history,g=e.Pop,m=null,v=y();null==v&&(v=0,f.replaceState(t({},f.state,{idx:v}),""));function y(){return(f.state||{idx:null}).idx}function w(){let t=e.Pop,n=y();if(null!=n){let e=n-v;g=t,v=n,m&&m({action:g,location:S.location,delta:e})}else o(!1,"You are trying to block a POP navigation to a location that was not created by @remix-run/router. The block will fail silently in production, but in general you should do all navigation with the router (instead of using window.history.pushState directly) to avoid this situation.")}function b(t,n){g=e.Push;let a=l(S.location,t,n);c&&c(a,t),v=y()+1;let r=s(a,v),i=S.createHref(a);try{f.pushState(r,"",i)}catch(o){p.location.assign(i)}d&&m&&m({action:g,location:S.location,delta:1})}function P(t,n){g=e.Replace;let a=l(S.location,t,n);c&&c(a,t),v=y();let r=s(a,v),i=S.createHref(a);f.replaceState(r,"",i),d&&m&&m({action:g,location:S.location,delta:0})}function x(t){let e="null"!==p.location.origin?p.location.origin:p.location.href,n="string"==typeof t?t:h(t);return i(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}let S={get action(){return g},get location(){return n(p,f)},listen(t){if(m)throw new Error("A history only accepts one active listener");return p.addEventListener(a,w),m=t,()=>{p.removeEventListener(a,w),m=null}},createHref:t=>r(p,t),createURL:x,encodeLocation(t){let e=x(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:b,replace:P,go:t=>f.go(t)};return S}((function(t,e){let{pathname:n="/",search:a="",hash:r=""}=c(t.location.hash.substr(1));return l("",{pathname:n,search:a,hash:r},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){let n=t.document.querySelector("base"),a="";if(n&&n.getAttribute("href")){let e=t.location.href,n=e.indexOf("#");a=-1===n?e:e.slice(0,n)}return a+"#"+("string"==typeof e?e:h(e))}),(function(t,e){o("/"===t.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(e)+")")}),n)}function i(t,e){if(!1===t||null==t)throw new Error(e)}function o(t,e){if(!t)try{throw new Error(e)}catch(n){}}function s(t,e){return{usr:t.state,key:t.key,idx:e}}function l(e,n,a,r){return void 0===a&&(a=null),t({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof n?c(n):n,{state:a,key:n&&n.key||r||Math.random().toString(36).substr(2,8)})}function h(t){let{pathname:e="/",search:n="",hash:a=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),a&&"#"!==a&&(e+="#"===a.charAt(0)?a:"#"+a),e}function c(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let a=t.indexOf("?");a>=0&&(e.search=t.substr(a),t=t.substr(0,a)),t&&(e.pathname=t)}return e}var u,p;function d(t,e,n){void 0===n&&(n="/");let a=R(("string"==typeof e?c(e):e).pathname||"/",n);if(null==a)return null;let r=f(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(r);let i=null;for(let o=0;null==i&&o<r.length;++o)i=$(r[o],L(a));return i}function f(t,e,n,a){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===a&&(a="");let r=(t,r,o)=>{let s={relativePath:void 0===o?t.path||"":o,caseSensitive:!0===t.caseSensitive,childrenIndex:r,route:t};s.relativePath.startsWith("/")&&(i(s.relativePath.startsWith(a),'Absolute route path "'+s.relativePath+'" nested under path "'+a+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(a.length));let l=U([a,s.relativePath]),h=n.concat(s);t.children&&t.children.length>0&&(i(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),f(t.children,e,h,l)),(null!=t.path||t.index)&&e.push({path:l,score:S(l,t.index),routesMeta:h})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let a of g(t.path))r(t,e,a);else r(t,e)})),e}function g(t){let e=t.split("/");if(0===e.length)return[];let[n,...a]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===a.length)return r?[i,""]:[i];let o=g(a.join("/")),s=[];return s.push(...o.map((t=>""===t?i:[i,t].join("/")))),r&&s.push(...o),s.map((e=>t.startsWith("/")&&""===e?"/":e))}(p=u||(u={})).data="data",p.deferred="deferred",p.redirect="redirect",p.error="error";const m=/^:\w+$/,v=3,y=2,w=1,b=10,P=-2,x=t=>"*"===t;function S(t,e){let n=t.split("/"),a=n.length;return n.some(x)&&(a+=P),e&&(a+=y),n.filter((t=>!x(t))).reduce(((t,e)=>t+(m.test(e)?v:""===e?w:b)),a)}function $(t,e){let{routesMeta:n}=t,a={},r="/",i=[];for(let o=0;o<n.length;++o){let t=n[o],s=o===n.length-1,l="/"===r?e:e.slice(r.length)||"/",h=W({path:t.relativePath,caseSensitive:t.caseSensitive,end:s},l);if(!h)return null;Object.assign(a,h.params);let c=t.route;i.push({params:a,pathname:U([r,h.pathname]),pathnameBase:k(U([r,h.pathnameBase])),route:c}),"/"!==h.pathnameBase&&(r=U([r,h.pathnameBase]))}return i}function W(t,e){"string"==typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);E("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let a=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,((t,e)=>(a.push(e),"/([^\\/]+)")));t.endsWith("*")?(a.push("*"),r+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==t&&"/"!==t&&(r+="(?:(?=\\/|$))");let i=new RegExp(r,e?void 0:"i");return[i,a]}(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),s=r.slice(1);return{params:a.reduce(((t,e,n)=>{if("*"===e){let t=s[n]||"";o=i.slice(0,i.length-t.length).replace(/(.)\/+$/,"$1")}return t[e]=function(t,e){try{return decodeURIComponent(t)}catch(n){return E(!1,'The value for the URL param "'+e+'" will not be decoded because the string "'+t+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),t}}(s[n]||"",e),t}),{}),pathname:i,pathnameBase:o,pattern:t}}function L(t){try{return decodeURI(t)}catch(e){return E(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function R(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=t.charAt(n);return a&&"/"!==a?null:t.slice(n)||"/"}function E(t,e){if(!t)try{throw new Error(e)}catch(n){}}function O(t,e,n,a){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(a)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function A(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function j(e,n,a,r){let o;void 0===r&&(r=!1),"string"==typeof e?o=c(e):(o=t({},e),i(!o.pathname||!o.pathname.includes("?"),O("?","pathname","search",o)),i(!o.pathname||!o.pathname.includes("#"),O("#","pathname","hash",o)),i(!o.search||!o.search.includes("#"),O("#","search","hash",o)));let s,l=""===e||""===o.pathname,h=l?"/":o.pathname;if(r||null==h)s=a;else{let t=n.length-1;if(h.startsWith("..")){let e=h.split("/");for(;".."===e[0];)e.shift(),t-=1;o.pathname=e.join("/")}s=t>=0?n[t]:"/"}let u=function(t,e){void 0===e&&(e="/");let{pathname:n,search:a="",hash:r=""}="string"==typeof t?c(t):t,i=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:i,search:T(a),hash:C(r)}}(o,s),p=h&&"/"!==h&&h.endsWith("/"),d=(l||"."===h)&&a.endsWith("/");return u.pathname.endsWith("/")||!p&&!d||(u.pathname+="/"),u}const U=t=>t.join("/").replace(/\/\/+/g,"/"),k=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),T=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",C=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";class I{constructor(t,e,n,a){void 0===a&&(a=!1),this.status=t,this.statusText=e||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function B(t){return t instanceof I}const M=["post","put","patch","delete"];new Set(M);const H=["get",...M];new Set(H);export{e as A,B as a,r as c,A as g,i,U as j,d as m,c as p,j as r,R as s};
