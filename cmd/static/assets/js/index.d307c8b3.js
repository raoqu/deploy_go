import{r as t,j as r}from"./react@18.2.0.2fdb0b9b.js";import{createList as e}from"./model.6a9dc882.js";import{r as s,A as o,u as a,c}from"./index.a30a498d.js";import{B as i,a as m,s as p}from"./BasicForm.f5735a14.js";import n from"./PermissionDrawer.e90e0f7e.js";import{u as _}from"./react-i18next@13.2.2_i18next@23.4.6_react-dom@18.2.0_react@18.2.0.77582941.js";import{m as d}from"./antd@5.8.6_react-dom@18.2.0_react@18.2.0.81df36e9.js";import"./@babel_runtime@7.22.15.d775819b.js";import"./constants.216e4f99.js";import"./react-dom@18.2.0_react@18.2.0.8df8243d.js";import"./scheduler@0.23.0.c51d43b5.js";import"./react-router-dom@6.7.0_react-dom@18.2.0_react@18.2.0.9084b5a5.js";import"./react-router@6.7.0_react@18.2.0.693eeeca.js";import"./@remix-run_router@1.3.0.1d5183a9.js";import"./nprogress@0.2.0.4a3724cf.js";import"./@loadable_component@5.15.3_react@18.2.0.60124271.js";import"./react-is@16.13.1.80a4043c.js";import"./hoist-non-react-statics@3.3.2.6a7bb5c0.js";import"./crypto-js@4.1.1.9d3f7c7e.js";import"./@iconify_react@3.2.2_react@18.2.0.f53e0daf.js";import"./ahooks@3.7.8_react@18.2.0.e033fbc3.js";import"./lodash@4.17.21.488cb1de.js";import"./dayjs@1.11.9.0ab4705d.js";import"./tslib@2.6.2.dead8cb6.js";import"./resize-observer-polyfill@1.5.1.ad543aa3.js";import"./react-redux@8.1.2_@types_react-dom@18.2.7_@types_react@18.2.21_react-dom@18.2.0_react@18.2.0_redux@4.2.1.d5196981.js";import"./react-is@18.2.0.3044b35a.js";import"./use-sync-external-store@1.2.0_react@18.2.0.a97dec32.js";import"./axios@1.5.0.743c2fba.js";import"./@reduxjs_toolkit@1.9.5_react-redux@8.1.2_react@18.2.0.3821e725.js";import"./immer@9.0.21.269227bb.js";import"./redux@4.2.1.595aa483.js";import"./redux-thunk@2.4.2_redux@4.2.1.b3d00609.js";import"./react-activation@0.12.4_prop-types@15.8.1_react@18.2.0.2a6ec60f.js";import"./szfe-tools@0.0.0-beta.7.1eda992b.js";import"./create-react-context@0.3.0_prop-types@15.8.1_react@18.2.0.1d9eedd3.js";import"./prop-types@15.8.1.b55ce3dc.js";import"./gud@1.0.0.8a75aca0.js";import"./warning@4.0.3.008c4a7c.js";import"./react-node-key@0.4.0_react@18.2.0.7f53ddae.js";import"./@ant-design_icons@4.8.1_react-dom@18.2.0_react@18.2.0.8ae74751.js";import"./@ant-design_icons-svg@4.3.1.ed2b4510.js";import"./classnames@2.3.2.78a47676.js";import"./@ant-design_colors@6.0.0.047ad5c3.js";import"./@ctrl_tinycolor@3.6.1.4982d949.js";import"./rc-util@5.37.0_react-dom@18.2.0_react@18.2.0.0a514d36.js";import"./@ant-design_cssinjs@1.17.0_react-dom@18.2.0_react@18.2.0.00d822c9.js";import"./@emotion_hash@0.8.0.b17c1a96.js";import"./@emotion_unitless@0.7.5.ede54c47.js";import"./stylis@4.3.0.b6f45693.js";import"./i18next@23.4.6.e3b19909.js";import"./i18next-http-backend@2.2.2.fea99512.js";import"./cross-fetch@3.1.6.cbd01204.js";import"./i18next-browser-languagedetector@7.1.0.32919bb8.js";import"./rc-resize-observer@1.3.1_react-dom@18.2.0_react@18.2.0.1b9e393b.js";import"./rc-motion@2.9.0_react-dom@18.2.0_react@18.2.0.be0e8055.js";import"./rc-notification@5.1.1_react-dom@18.2.0_react@18.2.0.42cd2055.js";import"./@ant-design_icons@5.2.6_react-dom@18.2.0_react@18.2.0.5014c5db.js";import"./@ant-design_colors@7.0.0.8d55ff50.js";import"./rc-checkbox@3.1.0_react-dom@18.2.0_react@18.2.0.b81f51ae.js";import"./rc-tabs@12.9.0_react-dom@18.2.0_react@18.2.0.c30b993b.js";import"./rc-dropdown@4.1.0_react-dom@18.2.0_react@18.2.0.f95eb8df.js";import"./@rc-component_trigger@1.15.6_react-dom@18.2.0_react@18.2.0.4df2064d.js";import"./@rc-component_portal@1.1.2_react-dom@18.2.0_react@18.2.0.61e5d733.js";import"./rc-menu@9.10.0_react-dom@18.2.0_react@18.2.0.7efaf49a.js";import"./rc-overflow@1.3.2_react-dom@18.2.0_react@18.2.0.94eeb4eb.js";import"./rc-select@14.7.4_react-dom@18.2.0_react@18.2.0.7cdd5d00.js";import"./rc-virtual-list@3.10.5_react-dom@18.2.0_react@18.2.0.9ada49ae.js";import"./rc-input-number@8.0.4_react-dom@18.2.0_react@18.2.0.c1093a58.js";import"./@rc-component_mini-decimal@1.1.0.aef7780e.js";import"./rc-input@1.1.1_react-dom@18.2.0_react@18.2.0.5213b704.js";import"./rc-drawer@6.2.0_react-dom@18.2.0_react@18.2.0.1a469b7a.js";import"./rc-field-form@1.36.2_react-dom@18.2.0_react@18.2.0.657035dd.js";import"./async-validator@4.2.5.cf877c1f.js";import"./scroll-into-view-if-needed@3.0.10.0f44d9d0.js";import"./compute-scroll-into-view@3.0.3.9a30535a.js";import"./rc-dialog@9.1.0_react-dom@18.2.0_react@18.2.0.c5c2ba68.js";import"./rc-rate@2.12.0_react-dom@18.2.0_react@18.2.0.ea71b180.js";import"./rc-slider@10.2.1_react-dom@18.2.0_react@18.2.0.cc7c2c01.js";import"./rc-switch@4.1.0_react-dom@18.2.0_react@18.2.0.c2701818.js";import"./rc-tree@5.7.10_react-dom@18.2.0_react@18.2.0.26d29bf3.js";import"./rc-pagination@3.6.1_react-dom@18.2.0_react@18.2.0.9cb0db55.js";import"./rc-textarea@1.3.4_react-dom@18.2.0_react@18.2.0.09967ddd.js";import"./rc-tree-select@5.11.2_react-dom@18.2.0_react@18.2.0.104dd79d.js";import"./rc-upload@4.3.4_react-dom@18.2.0_react@18.2.0.9b0c9652.js";import"./rc-picker@3.13.1_dayjs@1.11.9_react-dom@18.2.0_react@18.2.0.0b5043c0.js";import"./rc-progress@3.4.2_react-dom@18.2.0_react@18.2.0.957514a6.js";import"./rc-tooltip@6.0.1_react-dom@18.2.0_react@18.2.0.2edc6aa6.js";import"./react-draggable@4.4.5_react-dom@18.2.0_react@18.2.0.00407065.js";import"./clsx@1.2.1.88d5f775.js";const j={page:1,pageSize:20},u={status:1};function l(){const{t:l}=_(),g=t.useRef(null),f=t.useRef(null),[y,x]=d.useMessage(),[h,b]=t.useState(!1),[S,v]=t.useState(!1),[w,k]=t.useState(!1),[z,$]=t.useState(o(l)),[C,F]=t.useState(""),[B,D]=t.useState(u),[N,R]=t.useState(j.page),[A,E]=t.useState(j.pageSize),[I,O]=t.useState(0),[V,G]=t.useState([]),[H,K]=t.useState(""),[L,M]=t.useState(!1),[P,U]=t.useState([]),[W,X]=t.useState([]),{permissions:J}=a(),Q="/authority/user",T={page:c(`${Q}/index`,J),create:c(`${Q}/create`,J),update:c(`${Q}/update`,J),delete:c(`${Q}/delete`,J),permission:c(`${Q}/authority`,J)},Y=t.useCallback((async t=>{try{b(!0);const{code:r,data:e}=await function(t){return s.get("/authority/user/page",{params:t})}(t);if(200!==Number(r))return;const{items:o,total:a}=e;O(a),G(o)}finally{b(!1)}}),[]);t.useEffect((()=>{T.page&&Y({...j})}),[Y,T.page]);return r.jsx("div",{children:r.jsxs(r.Fragment,{children:[x,r.jsx(i,{title:z,open:w,confirmLoading:S,onOk:()=>{var t;null==(t=f.current)||t.handleSubmit()},onCancel:()=>{k(!1)},children:r.jsx(m,{formRef:f,list:e(l),data:B,labelCol:{span:6},handleFinish:async t=>{try{v(!0);const r=()=>{return C?(r=C,e=t,s.put(`/authority/user/${r}`,e)):function(t){return s.post("/authority/user",t)}(t);var r,e},{code:e,message:o}=await r();if(200!==Number(e))return;y.success(o||l("public.successfulOperation")),k(!1),(()=>{var t;const r={...(null==(t=g.current)?void 0:t.getFieldsValue())||{},page:N,pageSize:A};Y(r)})()}finally{v(!1)}}})}),r.jsx(n,{isVisible:L,treeData:W,checkedKeys:P,onClose:()=>{M(!1)},onSubmit:async t=>{try{b(!0);const r={menuIds:t,userId:H},{code:e,message:s}=await p(r);if(200!==Number(e))return;y.success(s||l("system.authorizationSuccessful")),M(!1)}finally{b(!1)}}})]})})}export{l as default};
