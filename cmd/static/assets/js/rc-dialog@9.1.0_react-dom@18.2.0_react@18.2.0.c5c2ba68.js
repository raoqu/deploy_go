import{h as e,d as t,e as n}from"./@babel_runtime@7.22.15.d775819b.js";import{r,W as o}from"./react@18.2.0.2fdb0b9b.js";import{P as a}from"./@rc-component_portal@1.1.2_react-dom@18.2.0_react@18.2.0.61e5d733.js";import{c}from"./classnames@2.3.2.78a47676.js";import{p as s,C as l,D as i,K as u}from"./rc-util@5.37.0_react-dom@18.2.0_react@18.2.0.0a514d36.js";import{C as m}from"./rc-motion@2.9.0_react-dom@18.2.0_react@18.2.0.be0e8055.js";function f(e,t,n){var r=t;return!r&&n&&(r="".concat(e,"-").concat(n)),r}function d(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var o=e.document;"number"!=typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}const v=r.memo((function(e){return e.children}),(function(e,t){return!t.shouldUpdate}));var p={width:0,height:0,overflow:"hidden",outline:"none"},y=o.forwardRef((function(n,a){var s=n.prefixCls,l=n.className,i=n.style,u=n.title,m=n.ariaId,f=n.footer,d=n.closable,y=n.closeIcon,C=n.onClose,b=n.children,E=n.bodyStyle,h=n.bodyProps,N=n.modalRender,g=n.onMouseDown,k=n.onMouseUp,x=n.holderRef,R=n.visible,w=n.forceRender,I=n.width,P=n.height,D=r.useRef(),S=r.useRef();o.useImperativeHandle(a,(function(){return{focus:function(){var e;null===(e=D.current)||void 0===e||e.focus()},changeActive:function(e){var t=document.activeElement;e&&t===S.current?D.current.focus():e||t!==D.current||S.current.focus()}}}));var _,O,T,j={};void 0!==I&&(j.width=I),void 0!==P&&(j.height=P),f&&(_=o.createElement("div",{className:"".concat(s,"-footer")},f)),u&&(O=o.createElement("div",{className:"".concat(s,"-header")},o.createElement("div",{className:"".concat(s,"-title"),id:m},u))),d&&(T=o.createElement("button",{type:"button",onClick:C,"aria-label":"Close",className:"".concat(s,"-close")},y||o.createElement("span",{className:"".concat(s,"-close-x")})));var A=o.createElement("div",{className:"".concat(s,"-content")},T,O,o.createElement("div",e({className:"".concat(s,"-body"),style:E},h),b),_);return o.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":u?m:null,"aria-modal":"true",ref:x,style:t(t({},i),j),className:c(s,l),onMouseDown:g,onMouseUp:k},o.createElement("div",{tabIndex:0,ref:D,style:p,"aria-hidden":"true"}),o.createElement(v,{shouldUpdate:R||w},N?N(A):A),o.createElement("div",{tabIndex:0,ref:S,style:p,"aria-hidden":"true"}))})),C=r.forwardRef((function(o,a){var s=o.prefixCls,l=o.title,i=o.style,u=o.className,f=o.visible,v=o.forceRender,p=o.destroyOnClose,C=o.motionName,b=o.ariaId,E=o.onVisibleChanged,h=o.mousePosition,N=r.useRef(),g=r.useState(),k=n(g,2),x=k[0],R=k[1],w={};function I(){var e,t,n,r,o,a=(e=N.current,t=e.getBoundingClientRect(),n={left:t.left,top:t.top},r=e.ownerDocument,o=r.defaultView||r.parentWindow,n.left+=d(o),n.top+=d(o,!0),n);R(h?"".concat(h.x-a.left,"px ").concat(h.y-a.top,"px"):"")}return x&&(w.transformOrigin=x),r.createElement(m,{visible:f,onVisibleChanged:E,onAppearPrepare:I,onEnterPrepare:I,forceRender:v,motionName:C,removeOnLeave:p,ref:N},(function(n,m){var f=n.className,d=n.style;return r.createElement(y,e({},o,{ref:a,title:l,ariaId:b,prefixCls:s,holderRef:m,style:t(t(t({},d),i),w),className:c(u,f)}))}))}));function b(n){var o=n.prefixCls,a=n.style,s=n.visible,l=n.maskProps,i=n.motionName;return r.createElement(m,{key:"mask",visible:s,motionName:i,leavedClassName:"".concat(o,"-mask-hidden")},(function(n,s){var i=n.className,u=n.style;return r.createElement("div",e({ref:s,style:t(t({},u),a),className:c("".concat(o,"-mask"),i)},l))}))}function E(o){var a=o.prefixCls,m=void 0===a?"rc-dialog":a,d=o.zIndex,v=o.visible,p=void 0!==v&&v,y=o.keyboard,E=void 0===y||y,h=o.focusTriggerAfterClose,N=void 0===h||h,g=o.wrapStyle,k=o.wrapClassName,x=o.wrapProps,R=o.onClose,w=o.afterOpenChange,I=o.afterClose,P=o.transitionName,D=o.animation,S=o.closable,_=void 0===S||S,O=o.mask,T=void 0===O||O,j=o.maskTransitionName,A=o.maskAnimation,M=o.maskClosable,U=void 0===M||M,V=o.maskStyle,z=o.maskProps,K=o.rootClassName,L=r.useRef(),B=r.useRef(),W=r.useRef(),H=r.useState(p),X=n(H,2),Y=X[0],q=X[1],F=s();function G(e){null==R||R(e)}var J=r.useRef(!1),Q=r.useRef(),Z=null;return U&&(Z=function(e){J.current?J.current=!1:B.current===e.target&&G(e)}),r.useEffect((function(){p&&(q(!0),i(B.current,document.activeElement)||(L.current=document.activeElement))}),[p]),r.useEffect((function(){return function(){clearTimeout(Q.current)}}),[]),r.createElement("div",e({className:c("".concat(m,"-root"),K)},l(o,{data:!0})),r.createElement(b,{prefixCls:m,visible:T&&p,motionName:f(m,j,A),style:t({zIndex:d},V),maskProps:z}),r.createElement("div",e({tabIndex:-1,onKeyDown:function(e){if(E&&e.keyCode===u.ESC)return e.stopPropagation(),void G(e);p&&e.keyCode===u.TAB&&W.current.changeActive(!e.shiftKey)},className:c("".concat(m,"-wrap"),k),ref:B,onClick:Z,style:t(t({zIndex:d},g),{},{display:Y?null:"none"})},x),r.createElement(C,e({},o,{onMouseDown:function(){clearTimeout(Q.current),J.current=!0},onMouseUp:function(){Q.current=setTimeout((function(){J.current=!1}))},ref:W,closable:_,ariaId:F,prefixCls:m,visible:p&&Y,onClose:G,onVisibleChanged:function(e){if(e)i(B.current,document.activeElement)||null===(t=W.current)||void 0===t||t.focus();else{if(q(!1),T&&L.current&&N){try{L.current.focus({preventScroll:!0})}catch(n){}L.current=null}Y&&(null==I||I())}var t;null==w||w(e)},motionName:f(m,P,D)}))))}C.displayName="Content";var h=function(t){var o=t.visible,c=t.getContainer,s=t.forceRender,l=t.destroyOnClose,i=void 0!==l&&l,u=t.afterClose,m=r.useState(o),f=n(m,2),d=f[0],v=f[1];return r.useEffect((function(){o&&v(!0)}),[o]),s||!i||d?r.createElement(a,{open:o||s||d,autoDestroy:!1,getContainer:c,autoLock:o||d},r.createElement(E,e({},t,{destroyOnClose:i,afterClose:function(){null==u||u(),v(!1)}}))):null};h.displayName="Dialog";export{h as D,y as P};
