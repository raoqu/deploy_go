import{r as t,j as e}from"./react@18.2.0.2fdb0b9b.js";import{F as a,b as s,D as r,E as o}from"./@ant-design_icons@4.8.1_react-dom@18.2.0_react@18.2.0.8ae74751.js";import{T as i,M as n,I as c,m as l,R as p,U as m,a as d,B as f}from"./antd@5.8.6_react-dom@18.2.0_react@18.2.0.81df36e9.js";import{_ as D}from"./lodash@4.17.21.488cb1de.js";import{g as u}from"./helper.07728053.js";import{F as h}from"./@monaco-editor_react@4.6.0_monaco-editor@0.45.0_react-dom@18.2.0_react@18.2.0.b9351ed3.js";import{a as C}from"./axios@1.5.0.743c2fba.js";import{m as j}from"./index.a30a498d.js";import"./@babel_runtime@7.22.15.d775819b.js";import"./@ant-design_icons-svg@4.3.1.ed2b4510.js";import"./classnames@2.3.2.78a47676.js";import"./@ant-design_colors@6.0.0.047ad5c3.js";import"./@ctrl_tinycolor@3.6.1.4982d949.js";import"./rc-util@5.37.0_react-dom@18.2.0_react@18.2.0.0a514d36.js";import"./react-is@16.13.1.80a4043c.js";import"./react-dom@18.2.0_react@18.2.0.8df8243d.js";import"./scheduler@0.23.0.c51d43b5.js";import"./@ant-design_cssinjs@1.17.0_react-dom@18.2.0_react@18.2.0.00d822c9.js";import"./@emotion_hash@0.8.0.b17c1a96.js";import"./@emotion_unitless@0.7.5.ede54c47.js";import"./stylis@4.3.0.b6f45693.js";import"./rc-resize-observer@1.3.1_react-dom@18.2.0_react@18.2.0.1b9e393b.js";import"./resize-observer-polyfill@1.5.1.ad543aa3.js";import"./rc-motion@2.9.0_react-dom@18.2.0_react@18.2.0.be0e8055.js";import"./rc-notification@5.1.1_react-dom@18.2.0_react@18.2.0.42cd2055.js";import"./@ant-design_icons@5.2.6_react-dom@18.2.0_react@18.2.0.5014c5db.js";import"./@ant-design_colors@7.0.0.8d55ff50.js";import"./rc-checkbox@3.1.0_react-dom@18.2.0_react@18.2.0.b81f51ae.js";import"./dayjs@1.11.9.0ab4705d.js";import"./rc-tabs@12.9.0_react-dom@18.2.0_react@18.2.0.c30b993b.js";import"./rc-dropdown@4.1.0_react-dom@18.2.0_react@18.2.0.f95eb8df.js";import"./@rc-component_trigger@1.15.6_react-dom@18.2.0_react@18.2.0.4df2064d.js";import"./@rc-component_portal@1.1.2_react-dom@18.2.0_react@18.2.0.61e5d733.js";import"./rc-menu@9.10.0_react-dom@18.2.0_react@18.2.0.7efaf49a.js";import"./rc-overflow@1.3.2_react-dom@18.2.0_react@18.2.0.94eeb4eb.js";import"./rc-select@14.7.4_react-dom@18.2.0_react@18.2.0.7cdd5d00.js";import"./rc-virtual-list@3.10.5_react-dom@18.2.0_react@18.2.0.9ada49ae.js";import"./rc-input-number@8.0.4_react-dom@18.2.0_react@18.2.0.c1093a58.js";import"./@rc-component_mini-decimal@1.1.0.aef7780e.js";import"./rc-input@1.1.1_react-dom@18.2.0_react@18.2.0.5213b704.js";import"./rc-drawer@6.2.0_react-dom@18.2.0_react@18.2.0.1a469b7a.js";import"./rc-field-form@1.36.2_react-dom@18.2.0_react@18.2.0.657035dd.js";import"./async-validator@4.2.5.cf877c1f.js";import"./scroll-into-view-if-needed@3.0.10.0f44d9d0.js";import"./compute-scroll-into-view@3.0.3.9a30535a.js";import"./rc-dialog@9.1.0_react-dom@18.2.0_react@18.2.0.c5c2ba68.js";import"./rc-rate@2.12.0_react-dom@18.2.0_react@18.2.0.ea71b180.js";import"./rc-slider@10.2.1_react-dom@18.2.0_react@18.2.0.cc7c2c01.js";import"./rc-switch@4.1.0_react-dom@18.2.0_react@18.2.0.c2701818.js";import"./rc-tree@5.7.10_react-dom@18.2.0_react@18.2.0.26d29bf3.js";import"./rc-pagination@3.6.1_react-dom@18.2.0_react@18.2.0.9cb0db55.js";import"./rc-textarea@1.3.4_react-dom@18.2.0_react@18.2.0.09967ddd.js";import"./rc-tree-select@5.11.2_react-dom@18.2.0_react@18.2.0.104dd79d.js";import"./rc-upload@4.3.4_react-dom@18.2.0_react@18.2.0.9b0c9652.js";import"./rc-picker@3.13.1_dayjs@1.11.9_react-dom@18.2.0_react@18.2.0.0b5043c0.js";import"./rc-progress@3.4.2_react-dom@18.2.0_react@18.2.0.957514a6.js";import"./rc-tooltip@6.0.1_react-dom@18.2.0_react@18.2.0.2edc6aa6.js";import"./@monaco-editor_loader@1.4.0_monaco-editor@0.45.0.bb883f0d.js";import"./state-local@1.0.7.41e5675b.js";import"./react-router-dom@6.7.0_react-dom@18.2.0_react@18.2.0.9084b5a5.js";import"./react-router@6.7.0_react@18.2.0.693eeeca.js";import"./@remix-run_router@1.3.0.1d5183a9.js";import"./nprogress@0.2.0.4a3724cf.js";import"./@loadable_component@5.15.3_react@18.2.0.60124271.js";import"./hoist-non-react-statics@3.3.2.6a7bb5c0.js";import"./crypto-js@4.1.1.9d3f7c7e.js";import"./@iconify_react@3.2.2_react@18.2.0.f53e0daf.js";import"./ahooks@3.7.8_react@18.2.0.e033fbc3.js";import"./tslib@2.6.2.dead8cb6.js";import"./react-redux@8.1.2_@types_react-dom@18.2.7_@types_react@18.2.21_react-dom@18.2.0_react@18.2.0_redux@4.2.1.d5196981.js";import"./react-is@18.2.0.3044b35a.js";import"./use-sync-external-store@1.2.0_react@18.2.0.a97dec32.js";import"./@reduxjs_toolkit@1.9.5_react-redux@8.1.2_react@18.2.0.3821e725.js";import"./immer@9.0.21.269227bb.js";import"./redux@4.2.1.595aa483.js";import"./redux-thunk@2.4.2_redux@4.2.1.b3d00609.js";import"./react-activation@0.12.4_prop-types@15.8.1_react@18.2.0.2a6ec60f.js";import"./szfe-tools@0.0.0-beta.7.1eda992b.js";import"./create-react-context@0.3.0_prop-types@15.8.1_react@18.2.0.1d9eedd3.js";import"./prop-types@15.8.1.b55ce3dc.js";import"./gud@1.0.0.8a75aca0.js";import"./warning@4.0.3.008c4a7c.js";import"./react-node-key@0.4.0_react@18.2.0.7f53ddae.js";import"./react-i18next@13.2.2_i18next@23.4.6_react-dom@18.2.0_react@18.2.0.77582941.js";import"./i18next@23.4.6.e3b19909.js";import"./i18next-http-backend@2.2.2.fea99512.js";import"./cross-fetch@3.1.6.cbd01204.js";import"./i18next-browser-languagedetector@7.1.0.32919bb8.js";const g=o=>{const{name:n,path:c,isFolder:l,navigate:p,deleteAction:m}=o,[d,f]=t.useState(n);t.useEffect((()=>{f(n)}),[n]);return e.jsxs("a",{className:"file-manager-item",onClick:()=>{p&&p(n,l)},children:[e.jsxs("div",{className:"file-item",children:[l?e.jsx(a,{}):e.jsx(s,{}),e.jsx(i,{title:d,mouseEnterDelay:.5,children:e.jsx("span",{className:"file-manager-item-name",children:n})})]}),e.jsx("span",{className:"delete-item",children:e.jsx(r,{className:"file-manager-item-delete",onClick:t=>{t.stopPropagation(),m&&m(n,l)}})})]})},x=a=>{const{path:s,action:r}=a,[o,i]=t.useState(!1),[p,m]=t.useState("");return e.jsxs(e.Fragment,{children:[e.jsx("a",{className:"file-manager-create-folder",onClick:()=>{i(!0)},children:e.jsx("span",{className:"file-item",children:"创建文件夹"})}),e.jsxs(n,{title:"创建文件夹",open:o,onOk:()=>{var t;/^[^\\/:\*\?"<>\|]+$/s.test(p)?(t=p,r&&r(s,t),i(!1),m("")):l.error("请输入一个合法的文件名")},onCancel:()=>{i(!1),m("")},centered:!0,children:[e.jsx("br",{}),e.jsx(c,{placeholder:"文件夹名称",value:p,autoFocus:!0,onChange:t=>m(t.target.value)})]})]})};const _=a=>{const{path:s,navigate:r}=a,[o,i]=t.useState([]);t.useEffect((()=>{i(function(t){const e=t.split("/"),a=[];for(let s=0;s<e.length;s++)a.push({name:e[s],path:0===s?e[s]:`${a[s-1].path}/${e[s]}`});return a}(s))}),[s]);return e.jsx("div",{className:"file-manager-navigator",children:o&&o.map(((t,a)=>e.jsxs("span",{children:[a===o.length-1?e.jsx("span",{className:"current",children:t.name}):e.jsx("span",{className:"to",onClick:()=>{(t=>{r?r(t.path):alert(t.path)})(t)},children:t.name}),a<o.length-1&&e.jsx("span",{className:"gray",children:" / "})]},t.name)))})};function v(a){const{style:s,path:r,data:o,deleteAction:i,createFolder:n,retrive:c,navigate:l}=a,[m,d]=t.useState(r);t.useEffect((()=>{c(r),d(r)}),[r]);const f=(t,e)=>{l?l(t,e):d(t)},D=(t,e)=>{f(m+"/"+t,e)},u=(t,e)=>{i&&i(t,e)};return e.jsxs("div",{className:"file-manager",style:s,children:[e.jsx(_,{path:m,navigate:t=>{f(t,!0)}}),e.jsx(p,{children:o&&o.map((t=>e.jsx(g,{name:t.fileName,path:m+"/"+t.fileName,isFolder:t.isFolder,fileSize:t.fileSize,navigate:D,deleteAction:u},t.id)))}),e.jsx("br",{}),e.jsx(x,{path:r,action:n||((t,e)=>{})})]})}const y=e.jsxs("label",{htmlFor:"terminal-input",children:[e.jsxs("span",{className:"line",children:[e.jsx("span",{className:"secondary",children:"guest"}),"@",e.jsx("span",{className:"primary",children:"raeiou.com"}),":~$"]}),e.jsx("br",{className:"mobile"}),e.jsx("span",{className:"mobile",children:">"})]}),F=t=>t?"string"!=typeof t?t:e.jsxs("span",{className:"line",children:[e.jsx("span",{className:"secondary",children:t}),e.jsx("br",{className:"mobile"}),e.jsx("span",{className:"mobile",children:">"})]}):y;const E=t.forwardRef((({enable:a,commands:s,theme:r,prompt:o,style:i,className:n},c)=>{const l=t.useRef(null),p=t.useRef(null),[m,d]=t.useState(""),[f,h]=t.useState([]),[C,j]=t.useState(["welcome"]),[g,x]=t.useState([]),[_,v]=t.useState(-1),[E,A]=t.useState("terminal-theme-dark"),[w,z]=t.useState(y),[N,b]=t.useState(!1),[S,k]=t.useState(!1);t.useImperativeHandle(c,(()=>({print(t){let e={id:u(),input:"",command:"",args:"",output:U(t)};setTimeout((()=>{h([e,...f])}),0)},tips(t){},prompt(t){z(F(t))},clear(){setTimeout((()=>{L()}),0)},terminate:()=>N,history:()=>f.map((t=>t.command)),theme:()=>E.substring(15)}))),t.useEffect((()=>{A("terminal-theme-"+r),z(F(o||y))}),[r,o]);const T=t.useCallback((t=>{d(t.target.value)}),[]),U=t=>{if("string"!=typeof t)return t;let a="<p>"+t+"</p>";return a=a.replace(/\n/g,"<br>"),a=a.replace(/\n/g,"&nbsp;"),e.jsx("div",{dangerouslySetInnerHTML:{__html:a}})},G=async(t,e,a)=>{k(!0),b(!1);const s=await(async(t,e,a)=>{const[s,r]=function(t){const e=t.indexOf(" ");return-1===e?[t,""]:[t.substring(0,e),t.substring(e+1).trimStart()]}(e);let o="";const i=a.default,n=a.error;if(s&&a[s]){const t=a[s];o="function"==typeof t?await t(r):t}else"function"==typeof i&&(o=await i(e),"__continue_process__"===o&&(o="function"==typeof n?await n(e):n||`Command not found: ${e}`));return{id:t,input:e,command:s,args:r,output:o}})(t,e,a);h([s,...f]),k(!1)},L=()=>{h([]),j([]),x([])},O=()=>{p.current&&p.current.focus()};t.useEffect((()=>(document.addEventListener("click",O),()=>{document.removeEventListener("click",O)})),[l]);return t.useEffect((()=>{const t=setTimeout((()=>{var t;null==(t=null==p?void 0:p.current)||t.focus()}),1);return()=>clearTimeout(t)}),[p,m,_]),e.jsxs("div",{className:"raoqu-terminal "+E+" "+n,style:i,"data-testid":"terminal-wrapper",ref:l,children:[g.length>1&&e.jsx("div",{children:g.map((t=>e.jsx("span",{className:"hint",children:t},t)))}),a&&e.jsxs("form",{onSubmit:t=>{t.preventDefault(),j([m,...C]),d(""),x([]),v(-1),G(D.uniqueId("item_"),m,s)},children:[e.jsx("label",{htmlFor:"terminal-input",children:w}),e.jsx("input",{title:"terminal-input",type:"text",id:"terminal-input",autoComplete:"off",spellCheck:"false",autoFocus:!0,autoCapitalize:"off",ref:p,value:m,onKeyDown:t=>{var e,a;const r=t.ctrlKey&&"l"===t.key.toLowerCase(),o=t.ctrlKey&&"c"===t.key.toLowerCase();if("Tab"===t.key){if(t.preventDefault(),!m)return;let e=[];for(const t in s)D.startsWith(t,m)&&(e=[...e,t]);const a=((t,e,a,s)=>"theme "===t?["light","dark","ubuntu"]:"projects "===t||"socials "===t?(e(`${t}go`),[]):void 0)(m,d);if(e=a?[...e,...a]:e,e.length>1)x(e);else if(1===e.length){const t=D.split(m," ");d(1!==t.length?`${t[0]} ${t[1]} ${e[0]}`:e[0]),x([])}}if(r&&(L(),setTimeout(O,0)),o&&b(!0),"ArrowUp"===t.key){if(t.preventDefault(),_>=C.length)return;if(_+1===C.length)return;d(C[_+1]),v((t=>t+1)),null==(e=null==p?void 0:p.current)||e.blur()}if("ArrowDown"===t.key){if(t.preventDefault(),_<0)return;if(0===_)return d(""),void v(-1);d(C[_-1]),v((t=>t-1)),null==(a=null==p?void 0:p.current)||a.blur()}},onChange:T})]}),f.map(((t,s)=>e.jsxs("div",{children:[a&&e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"terminal-input",children:w}),e.jsx("span",{children:t.input}),e.jsx("br",{})]}),t.output]},t.id)))]})}));E.displayName="Terminal";const{Dragger:A}=m,w=a=>{const{action:s,data:r,accept:o,showUploadList:i,onSuccess:n,onError:c}=a,[p,m]=t.useState(!1),d={name:"file",multiple:!0,showUploadList:i||!1,action:s||"/api/upload",data:r,accept:o||"*",onChange:function(t){const{status:e,size:a,name:s,response:r}=t.file;if("uploading"!==e)if(m(!1),"done"===e){const{filename:t}=r;let e={id:u(),fileName:t,size:a};n&&n(e)||l.success(`${s} 文件上传成功`)}else"error"===e&&(c&&c(t.file)||l.error(`${s} 文件上传失败`));else m(!0)}};return e.jsx("div",{children:e.jsx(A,{...d,className:"upload-dragger",children:e.jsx("div",{style:{pointerEvents:"none"},children:e.jsxs("div",{className:"drop_target",children:[e.jsxs("div",{className:"drop_target_text",children:[e.jsxs("div",{className:"img_files_container img_files_show_all",children:[e.jsx("div",{className:"img_file",children:e.jsx("img",{src:"data:image/svg+xml,%3Csvg%20version%3D%221.1%22%20viewBox%3D%220%200%2081.83%20110.59%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%3Cdefs%3E%0A%20%20%3CradialGradient%20id%3D%22paper-shadow-gradient%22%20cx%3D%2255.58%22%20cy%3D%2229.83%22%20r%3D%2235%22%20fx%3D%2280.58%22%20fy%3D%225.83%22%20gradientTransform%3D%22matrix%28.80002%20-.00067782%20.00076905%20.90769%2011.092%202.7912%29%22%20gradientUnits%3D%22userSpaceOnUse%22%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.2%22%20offset%3D%220%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.12%22%20offset%3D%22.19%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.06%22%20offset%3D%22.42%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.01%22%20offset%3D%22.68%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%220%22%20offset%3D%221%22%2F%3E%0A%20%20%3C%2FradialGradient%3E%0A%20%20%3ClinearGradient%20id%3D%22corner-shadow-gradient%22%20x1%3D%2261.737%22%20x2%3D%2273.471%22%20y1%3D%2224.742%22%20y2%3D%2212.467%22%20gradientTransform%3D%22scale%28.93808%201.066%29%22%20gradientUnits%3D%22userSpaceOnUse%22%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%220%22%20offset%3D%220%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.023593%22%20offset%3D%22.52%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.04%22%20offset%3D%22.7%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.07%22%20offset%3D%22.84%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.18%22%20offset%3D%22.94%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.25%22%20offset%3D%221%22%2F%3E%0A%20%20%3C%2FlinearGradient%3E%0A%20%3C%2Fdefs%3E%0A%20%3Ctitle%3Epng-file%3C%2Ftitle%3E%0A%20%3Cpath%20id%3D%22paper-white%22%20d%3D%22m81.73%2029.79-26.18-29.73h-42.55a13%2013%200%200%200-13%2012.94v84.63a13%2013%200%200%200%2013%2013h55.88a13%2013%200%200%200%2013-13z%22%20fill%3D%22%23fff%22%2F%3E%0A%20%3Cpath%20id%3D%22paper-shadow%22%20d%3D%22m81.73%2029.79-26.18-29.73h-42.55a13%2013%200%200%200-13%2012.94v84.63a13%2013%200%200%200%2013%2013h55.88a13%2013%200%200%200%2013-13z%22%20fill%3D%22url%28%23paper-shadow-gradient%29%22%2F%3E%0A%20%3Cpath%20id%3D%22corner-white%22%20d%3D%22m55.58%200%200.6%2022.13a6.09%206.09%200%200%200%206.09%206.08l19.56%201.62z%22%20fill%3D%22%23fff%22%2F%3E%0A%20%3Cpath%20id%3D%22corner-shadow%22%20d%3D%22m55.58%200%200.6%2022.13a6.09%206.09%200%200%200%206.09%206.08l19.56%201.62z%22%20fill%3D%22url%28%23corner-shadow-gradient%29%22%2F%3E%0A%20%3Cpath%20id%3D%22icon%22%20d%3D%22m66.5%2055.49a0.28%200.28%200%200%200%200-0.13%200.21%200.21%200%200%200%200-0.06%200.65%200.65%200%200%200-0.19-0.18l-25.59-14.77a0.58%200.58%200%200%200-0.57%200l-17%209.82a0.35%200.35%200%200%200-0.21%200.12l-6.15%203.56a0.65%200.65%200%200%200-0.16%200.13v5.16a0.56%200.56%200%200%200%200.29%200.49l25.5%2014.73a0.58%200.58%200%200%200%200.28%200.07%200.59%200.59%200%200%200%200.29-0.07l23.23-13.36a0.56%200.56%200%200%200%200.29-0.49v-4.95a0.17%200.17%200%200%200-0.01-0.07zm-26.06-14%2024.37%2014.07-9.39%205.44-6.55%203.79-3.87-2.25a9.58%209.58%200%200%200%203.13-1.08%203.88%203.88%200%200%200%202.28-3.22%203.89%203.89%200%200%200-2.32-3.24%209.54%209.54%200%200%200-3-1.05l2.12-4.56a0.33%200.33%200%200%200%200-0.33%200.33%200.33%200%200%200-0.31-0.06l-15.46%202.35a0.32%200.32%200%200%200-0.27%200.26%200.32%200.32%200%200%200%200.15%200.34l5.81%203.36a4.2%204.2%200%200%200-1.6%201.85l-11.18-6.38zm-4.44%2016.66%206.89%203.93a10.05%2010.05%200%200%201-4.94-1.18%203.27%203.27%200%200%201-1.95-2.66zm0.14-0.67a3.72%203.72%200%200%201%201.66-1.81l4.89%202.82a0.29%200.29%200%200%200%200.16%200h0.1a0.33%200.33%200%200%200%200.19-0.18l1.75-3.77a9.17%209.17%200%200%201%202.92%201%203.28%203.28%200%200%201%201.95%202.66%203.27%203.27%200%200%201-1.95%202.66%209.42%209.42%200%200%201-3.76%201.14zm8.08-3-1.52%203.27-4.23-2.44-0.67-0.39-5.32-3.07%2014-2.16-1.94%204.18zm-20.52-3.32%2011.65%206.64a2.18%202.18%200%200%200%200%200.44%203.88%203.88%200%200%200%202.27%203.22%2010.74%2010.74%200%200%200%205.26%201.26h1l4.33%202.47-5.65%203.21-11.23-6.48-13.14-7.58zm-6.07%204.16%2024.37%2014.07v3.61l-24.37-14.09zm25.5%2016.47v-2.4l5.51-3.18v3.61l-5.51%203.18zm22.24-11.65-16.11%209.3v-3.61l16.08-9.29z%22%20fill%3D%22%234876ff%22%2F%3E%0A%20%3Ctext%20id%3D%22label%22%20transform%3D%22rotate%28-.12%29%22%20x%3D%2212.07291%22%20y%3D%2298.885506%22%20fill%3D%22%234876ff%22%20font-family%3D%22sans-serif%22%20font-size%3D%2212.27px%22%20font-weight%3D%22700%22%3E.png%3C%2Ftext%3E%0A%3C%2Fsvg%3E%0A",loading:"lazy",className:"file_card",alt:"PNG icon"})}),e.jsx("div",{className:"img_file",children:e.jsx("img",{src:"data:image/svg+xml,%3Csvg%20version%3D%221.1%22%20viewBox%3D%220%200%2081.83%20110.59%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%3Cdefs%3E%0A%20%20%3CradialGradient%20id%3D%22paper-shadow-gradient%22%20cx%3D%2255.58%22%20cy%3D%2229.83%22%20r%3D%2235%22%20fx%3D%2280.58%22%20fy%3D%225.83%22%20gradientTransform%3D%22matrix%28.80002%20-.00067782%20.00076905%20.90769%2011.092%202.7912%29%22%20gradientUnits%3D%22userSpaceOnUse%22%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.2%22%20offset%3D%220%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.12%22%20offset%3D%22.19%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.06%22%20offset%3D%22.42%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.01%22%20offset%3D%22.68%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%220%22%20offset%3D%221%22%2F%3E%0A%20%20%3C%2FradialGradient%3E%0A%20%20%3ClinearGradient%20id%3D%22corner-shadow-gradient%22%20x1%3D%2261.737%22%20x2%3D%2273.471%22%20y1%3D%2224.742%22%20y2%3D%2212.467%22%20gradientTransform%3D%22scale%28.93808%201.066%29%22%20gradientUnits%3D%22userSpaceOnUse%22%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%220%22%20offset%3D%220%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.023593%22%20offset%3D%22.52%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.04%22%20offset%3D%22.7%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.07%22%20offset%3D%22.84%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.18%22%20offset%3D%22.94%22%2F%3E%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.25%22%20offset%3D%221%22%2F%3E%0A%20%20%3C%2FlinearGradient%3E%0A%20%3C%2Fdefs%3E%0A%20%3Ctitle%3Epng-file%3C%2Ftitle%3E%0A%20%3Cpath%20id%3D%22paper-white%22%20d%3D%22m81.73%2029.79-26.18-29.73h-42.55a13%2013%200%200%200-13%2012.94v84.63a13%2013%200%200%200%2013%2013h55.88a13%2013%200%200%200%2013-13z%22%20fill%3D%22%23fff%22%2F%3E%0A%20%3Cpath%20id%3D%22paper-shadow%22%20d%3D%22m81.73%2029.79-26.18-29.73h-42.55a13%2013%200%200%200-13%2012.94v84.63a13%2013%200%200%200%2013%2013h55.88a13%2013%200%200%200%2013-13z%22%20fill%3D%22url%28%23paper-shadow-gradient%29%22%2F%3E%0A%20%3Cpath%20id%3D%22corner-white%22%20d%3D%22m55.58%200%200.6%2022.13a6.09%206.09%200%200%200%206.09%206.08l19.56%201.62z%22%20fill%3D%22%23fff%22%2F%3E%0A%20%3Cpath%20id%3D%22corner-shadow%22%20d%3D%22m55.58%200%200.6%2022.13a6.09%206.09%200%200%200%206.09%206.08l19.56%201.62z%22%20fill%3D%22url%28%23corner-shadow-gradient%29%22%2F%3E%0A%20%3Cpath%20id%3D%22icon%22%20d%3D%22m%2016.57%2C60.7%20a%200.6%2C0.6%200%200%200%200.06%2C0.11%20l%200.06%2C0.1%200.1%2C0.09%20h%200.06%20l%2025.44%2C14.81%20h%200.05%20v%200%20a%200.56%2C0.56%200%200%200%200.44%2C0%20h%200.06%20v%200%20L%2065%2C62.57%20v%200%20a%200.28%2C0.28%200%200%200%200.1%2C-0.09%200.72%2C0.72%200%200%200%200.12%2C-0.21%20v%20-0.12%20c%200%2C0%200%2C-0.05%200%2C-0.08%20v%20-5.19%200%20a%200.57%2C0.57%200%200%200%200%2C-0.22%20c%200%2C0%200%2C0%200%2C0%20a%200.59%2C0.59%200%200%200%20-0.13%2C-0.18%20v%200%20L%2064.96%2C56.38%2039.57%2C41.56%20a%200.67%2C0.67%200%200%200%20-0.66%2C0%20L%2016.85%2C54.81%2016.73%2C54.9%20v%200%20a%200.57%2C0.57%200%200%200%20-0.12%2C0.18%20c%200%2C0%200%2C0%200%2C0%20a%200.8%2C0.8%200%200%200%200%2C0.21%20v%200%205.13%20c%200%2C0%200%2C0.06%200%2C0.08%20a%200.59%2C0.59%200%200%200%20-0.04%2C0.2%20z%20m%2011%2C-10.82%2012.92%2C-0.05%201.37%2C7.91%20-4.63%2C0.26%20a%200.32%2C0.32%200%200%200%200%2C0.64%20l%207.37%2C-0.43%201.68%2C7.72%20-23.1%2C-13.42%20z%20M%2064%2C58%20v%203.64%20L%2048%2C71.29%20V%2067.65%20Z%20M%2047.35%2C71.67%2043.26%2C74.13%20V%2070.49%20L%2047.35%2C68%20Z%20M%2042%2C70.5%20v%203.64%20l%20-24.15%2C-14%20v%20-3.66%20z%20m%20-2.75%2C-27.64%2024.17%2C14%20-16.07%2C9.67%20-0.27%2C-0.16%20-1.87%2C-8.56%20a%200.32%2C0.32%200%200%200%20-0.33%2C-0.25%20l%20-2.4%2C0.14%20-1.42%2C-8.25%20a%200.32%2C0.32%200%200%200%20-0.32%2C-0.27%20v%200%20l%20-12.11%2C0.06%20z%20m%20-16.7%2C10%2024.17%2C14%20-4.11%2C2.47%20-24.17%2C-14%20z%22%20fill%3D%22%234876ff%22%2F%3E%0A%20%3Ctext%20id%3D%22label%22%20transform%3D%22rotate%28-.12%29%22%20x%3D%2212.07291%22%20y%3D%2298.885506%22%20fill%3D%22%234876ff%22%20font-family%3D%22sans-serif%22%20font-size%3D%2212.27px%22%20font-weight%3D%22700%22%3E.jpg%3C%2Ftext%3E%0A%3C%2Fsvg%3E%0A",loading:"lazy",className:"file_card",alt:"JPEG icon"})}),e.jsx("div",{className:"img_file",children:e.jsx("img",{src:"data:image/svg+xml,%3Csvg%20version%3D%221.1%22%20viewBox%3D%220%200%2081.83%20110.59%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0D%0A%20%3Cdefs%3E%0D%0A%20%20%3CradialGradient%20id%3D%22paper-shadow-gradient%22%20cx%3D%2255.58%22%20cy%3D%2229.83%22%20r%3D%2235%22%20fx%3D%2280.58%22%20fy%3D%225.83%22%20gradientTransform%3D%22matrix%28.80002%20-.00067782%20.00076905%20.90769%2011.092%202.7912%29%22%20gradientUnits%3D%22userSpaceOnUse%22%3E%0D%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.2%22%20offset%3D%220%22%2F%3E%0D%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.12%22%20offset%3D%22.19%22%2F%3E%0D%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.06%22%20offset%3D%22.42%22%2F%3E%0D%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.01%22%20offset%3D%22.68%22%2F%3E%0D%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%220%22%20offset%3D%221%22%2F%3E%0D%0A%20%20%3C%2FradialGradient%3E%0D%0A%20%20%3ClinearGradient%20id%3D%22corner-shadow-gradient%22%20x1%3D%2261.737%22%20x2%3D%2273.471%22%20y1%3D%2224.742%22%20y2%3D%2212.467%22%20gradientTransform%3D%22scale%28.93808%201.066%29%22%20gradientUnits%3D%22userSpaceOnUse%22%3E%0D%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%220%22%20offset%3D%220%22%2F%3E%0D%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.023593%22%20offset%3D%22.52%22%2F%3E%0D%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.04%22%20offset%3D%22.7%22%2F%3E%0D%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.07%22%20offset%3D%22.84%22%2F%3E%0D%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.18%22%20offset%3D%22.94%22%2F%3E%0D%0A%20%20%20%3Cstop%20stop-color%3D%22%234876ff%22%20stop-opacity%3D%22.25%22%20offset%3D%221%22%2F%3E%0D%0A%20%20%3C%2FlinearGradient%3E%0D%0A%20%3C%2Fdefs%3E%0D%0A%20%3Ctitle%3Epng-file%3C%2Ftitle%3E%0D%0A%20%3Cpath%20id%3D%22paper-white%22%20d%3D%22m81.73%2029.79-26.18-29.73h-42.55a13%2013%200%200%200-13%2012.94v84.63a13%2013%200%200%200%2013%2013h55.88a13%2013%200%200%200%2013-13z%22%20fill%3D%22%23fff%22%2F%3E%0D%0A%20%3Cpath%20id%3D%22paper-shadow%22%20d%3D%22m81.73%2029.79-26.18-29.73h-42.55a13%2013%200%200%200-13%2012.94v84.63a13%2013%200%200%200%2013%2013h55.88a13%2013%200%200%200%2013-13z%22%20fill%3D%22url%28%23paper-shadow-gradient%29%22%2F%3E%0D%0A%20%3Cpath%20id%3D%22corner-white%22%20d%3D%22m55.58%200%200.6%2022.13a6.09%206.09%200%200%200%206.09%206.08l19.56%201.62z%22%20fill%3D%22%23fff%22%2F%3E%0D%0A%20%3Cpath%20id%3D%22corner-shadow%22%20d%3D%22m55.58%200%200.6%2022.13a6.09%206.09%200%200%200%206.09%206.08l19.56%201.62z%22%20fill%3D%22url%28%23corner-shadow-gradient%29%22%2F%3E%0D%0A%20%3Cpath%20id%3D%22icon%22%20d%3D%22m66.5%2055.49a0.28%200.28%200%200%200%200-0.13%200.21%200.21%200%200%200%200-0.06%200.65%200.65%200%200%200-0.19-0.18l-25.59-14.77a0.58%200.58%200%200%200-0.57%200l-17%209.82a0.35%200.35%200%200%200-0.21%200.12l-6.15%203.56a0.65%200.65%200%200%200-0.16%200.13v5.16a0.56%200.56%200%200%200%200.29%200.49l25.5%2014.73a0.58%200.58%200%200%200%200.28%200.07%200.59%200.59%200%200%200%200.29-0.07l23.23-13.36a0.56%200.56%200%200%200%200.29-0.49v-4.95a0.17%200.17%200%200%200-0.01-0.07zm-26.06-14%2024.37%2014.07-9.39%205.44-6.55%203.79-3.87-2.25a9.58%209.58%200%200%200%203.13-1.08%203.88%203.88%200%200%200%202.28-3.22%203.89%203.89%200%200%200-2.32-3.24%209.54%209.54%200%200%200-3-1.05l2.12-4.56a0.33%200.33%200%200%200%200-0.33%200.33%200.33%200%200%200-0.31-0.06l-15.46%202.35a0.32%200.32%200%200%200-0.27%200.26%200.32%200.32%200%200%200%200.15%200.34l5.81%203.36a4.2%204.2%200%200%200-1.6%201.85l-11.18-6.38zm-4.44%2016.66%206.89%203.93a10.05%2010.05%200%200%201-4.94-1.18%203.27%203.27%200%200%201-1.95-2.66zm0.14-0.67a3.72%203.72%200%200%201%201.66-1.81l4.89%202.82a0.29%200.29%200%200%200%200.16%200h0.1a0.33%200.33%200%200%200%200.19-0.18l1.75-3.77a9.17%209.17%200%200%201%202.92%201%203.28%203.28%200%200%201%201.95%202.66%203.27%203.27%200%200%201-1.95%202.66%209.42%209.42%200%200%201-3.76%201.14zm8.08-3-1.52%203.27-4.23-2.44-0.67-0.39-5.32-3.07%2014-2.16-1.94%204.18zm-20.52-3.32%2011.65%206.64a2.18%202.18%200%200%200%200%200.44%203.88%203.88%200%200%200%202.27%203.22%2010.74%2010.74%200%200%200%205.26%201.26h1l4.33%202.47-5.65%203.21-11.23-6.48-13.14-7.58zm-6.07%204.16%2024.37%2014.07v3.61l-24.37-14.09zm25.5%2016.47v-2.4l5.51-3.18v3.61l-5.51%203.18zm22.24-11.65-16.11%209.3v-3.61l16.08-9.29z%22%20fill%3D%22%234876ff%22%2F%3E%0D%0A%20%3Ctext%20id%3D%22label%22%20transform%3D%22rotate%28-.12%29%22%20x%3D%2212.07291%22%20y%3D%2298.885506%22%20fill%3D%22%234876ff%22%20font-family%3D%22sans-serif%22%20font-size%3D%2212.27px%22%20font-weight%3D%22700%22%3E.gif%3C%2Ftext%3E%0D%0A%3C%2Fsvg%3E%0D%0A",loading:"lazy",className:"file_card",alt:"GIF icon"})})]}),e.jsx("span",{children:"点击选择或拖拽文件上传"})]}),p&&e.jsx("div",{className:"infinite-progress-bar",children:e.jsx("div",{className:"bar"})})]})})})})},z=C.create({timeout:5e3});function N(){const{confirm:a}=n,s=t.useRef(null),[r,i]=t.useState([]),[c,l]=t.useState(!1),[p,m]=t.useState("{}"),[D,u]=t.useState("{}"),[C,g]=t.useState("Upload"),[x,_]=t.useState("espresso"),[y,F]=t.useState("");t.useEffect((()=>(z.post("/api/config",{name:"deploy.json",type:"read",data:""}).then((t=>{let e=t.data.data;u(e),m(e)})).catch((t=>{})),N(),()=>{})),[]);const A=t=>(t.sort(((t,e)=>t.isFolder!==e.isFolder?e.isFolder?1:-1:t.fileName.localeCompare(e.fileName))),t),N=async()=>{var t,e;const a=null==(t=(await fetch("/api/messages")).body)?void 0:t.getReader(),r=new TextDecoder("utf-8");if(a)for(;;){const{done:t,value:o}=await a.read();if(t)break;let i=r.decode(o,{stream:!0});i=y+i;let n=b(i);n[0]&&(null==(e=s.current)||e.print(n[0])),F(n[1])}},b=t=>{const e=t.lastIndexOf("\n");if(-1===e)return["",t];return[t.substring(0,e),t.substring(e+1)]},S=(t,e)=>{z.post("/api/delete",{filePath:C+"/"+t}).then((()=>{i(r.filter((e=>e.fileName!==t)))})).catch((t=>{}))};return e.jsx("div",{children:e.jsxs("div",{className:"app-container",children:[e.jsxs(d,{children:[e.jsx(w,{onSuccess:t=>{i(A([...r,{id:t.id,fileName:t.fileName,size:t.size,isFolder:!1}]))},data:{path:C}}),e.jsx(v,{data:r,path:C,retrive:t=>{(t=>{z.post("/api/files",{path:t,includeFolder:!0}).then((t=>{let e=t.data.data;A(e),i(e)})).catch((t=>{}))})(t)},navigate:(t,e)=>{e?g(t):(t=>{const e="/api/download?file="+encodeURIComponent(t);window.open(e,"_blank")})(t)},deleteAction:(t,s)=>{if(!s)return S(t);a({title:"确定要删除这个"+(s?"文件夹":"文件")+"吗?",icon:e.jsx(o,{}),content:"一旦删除，你将无法恢复这个文件",okText:"确认",cancelText:"取消",onOk(){S(t)}})},createFolder:(t,e)=>{const a={fileName:e,isFolder:!0,size:0};z.post("/api/createFolder",{path:t,name:e}).then((()=>{i(A([a,...r]))})).catch((t=>{}))}}),e.jsx("div",{className:"terminal-theme-"+x,style:{marginTop:"8px"},children:e.jsx(E,{className:"terminal",style:{height:"300px"},commands:{},theme:x,ref:s,prompt:">",enable:!1})}),e.jsx("div",{style:{textAlign:"center",marginTop:"8px"},children:e.jsx(f,{onClick:()=>{u(p),l(!0)},children:"编辑配置"})})]}),e.jsx(n,{title:"JSON Editor",open:c,onOk:()=>{z.post("/api/config",{name:"deploy.json",type:"write",data:D}).then((()=>{m(D),u(D),l(!1)})).catch((t=>{j.error("Fail saving changes!"),l(!1)}))},onCancel:()=>{u(p),l(!1)},width:"100%",style:{top:0},children:e.jsx(h,{height:"80vh",defaultLanguage:"json",defaultValue:D,onChange:(t,e)=>{u(t)}})})]})})}export{N as default};
