import{c as e,q as n,r as t,a as r,_ as a,f as o,e as i,d as u,b as c,j as s,h as f}from"./@babel_runtime@7.22.15.d775819b.js";import{c as v}from"./classnames@2.3.2.78a47676.js";import{c as l,l as d,z as m,n as p,s as E,J as y}from"./rc-util@5.37.0_react-dom@18.2.0_react@18.2.0.5dac6347.js";import{r as h}from"./react@18.2.0.be237728.js";var k=["children"],b=h.createContext({});function A(n){var t=n.children,r=e(n,k);return h.createElement(b.Provider,{value:r},t)}var L=function(e){n(i,e);var o=t(i);function i(){return r(this,i),o.apply(this,arguments)}return a(i,[{key:"render",value:function(){return this.props.children}}]),i}(h.Component),C="none",g="appear",R="enter",w="leave",S="none",P="prepare",j="start",N="active",O="end",T="prepared";function M(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit".concat(e)]="webkit".concat(n),t["Moz".concat(e)]="moz".concat(n),t["ms".concat(e)]="MS".concat(n),t["O".concat(e)]="o".concat(n.toLowerCase()),t}var x,V,_,z=(x=l(),V="undefined"!=typeof window?window:{},_={animationend:M("Animation","AnimationEnd"),transitionend:M("Transition","TransitionEnd")},x&&("AnimationEvent"in V||delete _.animationend.animation,"TransitionEvent"in V||delete _.transitionend.transition),_),D={};if(l()){var F=document.createElement("div");D=F.style}var I={};function K(e){if(I[e])return I[e];var n=z[e];if(n)for(var t=Object.keys(n),r=t.length,a=0;a<r;a+=1){var o=t[a];if(Object.prototype.hasOwnProperty.call(n,o)&&o in D)return I[e]=n[o],I[e]}return""}var q=K("animationend"),H=K("transitionend"),J=!(!q||!H),U=q||"animationend",W=H||"transitionend";function B(e,n){return e?"object"===o(e)?e[n.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(n):null}const G=function(e){var n=h.useRef(),t=h.useRef(e);t.current=e;var r=h.useCallback((function(e){t.current(e)}),[]);function a(e){e&&(e.removeEventListener(W,r),e.removeEventListener(U,r))}return h.useEffect((function(){return function(){a(n.current)}}),[]),[function(e){n.current&&n.current!==e&&a(n.current),e&&e!==n.current&&(e.addEventListener(W,r),e.addEventListener(U,r),n.current=e)},a]};var Q=l()?h.useLayoutEffect:h.useEffect;var X=[P,j,N,O],Y=[P,T],Z=!1,$=!0;function ee(e){return e===N||e===O}const ne=function(e,n,t){var r=m(S),a=i(r,2),o=a[0],u=a[1],c=function(){var e=h.useRef(null);function n(){d.cancel(e.current)}return h.useEffect((function(){return function(){n()}}),[]),[function t(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var o=d((function(){a<=1?r({isCanceled:function(){return o!==e.current}}):t(r,a-1)}));e.current=o},n]}(),s=i(c,2),f=s[0],v=s[1];var l=n?Y:X;return Q((function(){if(o!==S&&o!==O){var e=l.indexOf(o),n=l[e+1],r=t(o);r===Z?u(n,!0):n&&f((function(e){function t(){e.isCanceled()||u(n,!0)}!0===r?t():Promise.resolve(r).then(t)}))}}),[e,o]),h.useEffect((function(){return function(){v()}}),[]),[function(){u(P,!0)},o]};const te=function(e){var n=e;"object"===o(e)&&(n=e.transitionSupport);var t=h.forwardRef((function(e,t){var r=e.visible,a=void 0===r||r,o=e.removeOnLeave,s=void 0===o||o,f=e.forceRender,l=e.children,d=e.motionName,k=e.leavedClassName,A=e.eventProps,S=function(e,t){return!(!e.motionName||!n||!1===t)}(e,h.useContext(b).motion),O=h.useRef(),M=h.useRef();var x=function(e,n,t,r){var a=r.motionEnter,o=void 0===a||a,s=r.motionAppear,f=void 0===s||s,v=r.motionLeave,l=void 0===v||v,d=r.motionDeadline,p=r.motionLeaveImmediately,E=r.onAppearPrepare,y=r.onEnterPrepare,k=r.onLeavePrepare,b=r.onAppearStart,A=r.onEnterStart,L=r.onLeaveStart,S=r.onAppearActive,O=r.onEnterActive,M=r.onLeaveActive,x=r.onAppearEnd,V=r.onEnterEnd,_=r.onLeaveEnd,z=r.onVisibleChanged,D=m(),F=i(D,2),I=F[0],K=F[1],q=m(C),H=i(q,2),J=H[0],U=H[1],W=m(null),B=i(W,2),X=B[0],Y=B[1],te=h.useRef(!1),re=h.useRef(null);function ae(){return t()}var oe=h.useRef(!1);function ie(){U(C,!0),Y(null,!0)}function ue(e){var n=ae();if(!e||e.deadline||e.target===n){var t,r=oe.current;J===g&&r?t=null==x?void 0:x(n,e):J===R&&r?t=null==V?void 0:V(n,e):J===w&&r&&(t=null==_?void 0:_(n,e)),J!==C&&r&&!1!==t&&ie()}}var ce=G(ue),se=i(ce,1)[0],fe=function(e){var n,t,r;switch(e){case g:return c(n={},P,E),c(n,j,b),c(n,N,S),n;case R:return c(t={},P,y),c(t,j,A),c(t,N,O),t;case w:return c(r={},P,k),c(r,j,L),c(r,N,M),r;default:return{}}},ve=h.useMemo((function(){return fe(J)}),[J]),le=ne(J,!e,(function(e){if(e===P){var n=ve[P];return n?n(ae()):Z}var t;return pe in ve&&Y((null===(t=ve[pe])||void 0===t?void 0:t.call(ve,ae(),null))||null),pe===N&&(se(ae()),d>0&&(clearTimeout(re.current),re.current=setTimeout((function(){ue({deadline:!0})}),d))),pe===T&&ie(),$})),de=i(le,2),me=de[0],pe=de[1],Ee=ee(pe);oe.current=Ee,Q((function(){K(n);var t,r=te.current;te.current=!0,!r&&n&&f&&(t=g),r&&n&&o&&(t=R),(r&&!n&&l||!r&&p&&!n&&l)&&(t=w);var a=fe(t);t&&(e||a[P])?(U(t),me()):U(C)}),[n]),h.useEffect((function(){(J===g&&!f||J===R&&!o||J===w&&!l)&&U(C)}),[f,o,l]),h.useEffect((function(){return function(){te.current=!1,clearTimeout(re.current)}}),[]);var ye=h.useRef(!1);h.useEffect((function(){I&&(ye.current=!0),void 0!==I&&J===C&&((ye.current||I)&&(null==z||z(I)),ye.current=!0)}),[I,J]);var he=X;return ve[P]&&pe===j&&(he=u({transition:"none"},he)),[J,pe,he,null!=I?I:n]}(S,a,(function(){try{return O.current instanceof HTMLElement?O.current:y(M.current)}catch(e){return null}}),e),V=i(x,4),_=V[0],z=V[1],D=V[2],F=V[3],I=h.useRef(F);F&&(I.current=!0);var K,q=h.useCallback((function(e){O.current=e,p(t,e)}),[t]),H=u(u({},A),{},{visible:a});if(l)if(_===C)K=F?l(u({},H),q):!s&&I.current&&k?l(u(u({},H),{},{className:k}),q):f||!s&&!k?l(u(u({},H),{},{style:{display:"none"}}),q):null;else{var J,U;z===P?U="prepare":ee(z)?U="active":z===j&&(U="start");var W=B(d,"".concat(_,"-").concat(U));K=l(u(u({},H),{},{className:v(B(d,_),(J={},c(J,W,W&&U),c(J,d,"string"==typeof d),J)),style:D}),q)}else K=null;h.isValidElement(K)&&E(K)&&(K.ref||(K=h.cloneElement(K,{ref:q})));return h.createElement(L,{ref:M},K)}));return t.displayName="CSSMotion",t}(J);var re="add",ae="keep",oe="remove",ie="removed";function ue(e){var n;return n=e&&"object"===o(e)&&"key"in e?e:{key:e},u(u({},n),{},{key:String(n.key)})}function ce(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(ue)}var se=["component","children","onVisibleChanged","onAllRemoved"],fe=["status"],ve=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];const le=function(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te,v=function(o){n(l,o);var v=t(l);function l(){var e;r(this,l);for(var n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return e=v.call.apply(v,[this].concat(t)),c(s(e),"state",{keyEntities:[]}),c(s(e),"removeKey",(function(n){var t=e.state.keyEntities.map((function(e){return e.key!==n?e:u(u({},e),{},{status:ie})}));return e.setState({keyEntities:t}),t.filter((function(e){return e.status!==ie})).length})),e}return a(l,[{key:"render",value:function(){var n=this,t=this.state.keyEntities,r=this.props,a=r.component,o=r.children,c=r.onVisibleChanged,s=r.onAllRemoved,v=e(r,se),l=a||h.Fragment,d={};return ve.forEach((function(e){d[e]=v[e],delete v[e]})),delete v.keys,h.createElement(l,v,t.map((function(t,r){var a=t.status,v=e(t,fe),l=a===re||a===ae;return h.createElement(i,f({},d,{key:v.key,visible:l,eventProps:v,onVisibleChanged:function(e){(null==c||c(e,{key:v.key}),e)||0===n.removeKey(v.key)&&s&&s()}}),(function(e,n){return o(u(u({},e),{},{index:r}),n)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var t=e.keys,r=n.keyEntities,a=ce(t),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],r=0,a=n.length,o=ce(e),i=ce(n);o.forEach((function(e){for(var n=!1,o=r;o<a;o+=1){var c=i[o];if(c.key===e.key){r<o&&(t=t.concat(i.slice(r,o).map((function(e){return u(u({},e),{},{status:re})}))),r=o),t.push(u(u({},c),{},{status:ae})),r+=1,n=!0;break}}n||t.push(u(u({},e),{},{status:oe}))})),r<a&&(t=t.concat(i.slice(r).map((function(e){return u(u({},e),{},{status:re})}))));var c={};return t.forEach((function(e){var n=e.key;c[n]=(c[n]||0)+1})),Object.keys(c).filter((function(e){return c[e]>1})).forEach((function(e){(t=t.filter((function(n){var t=n.key,r=n.status;return t!==e||r!==oe}))).forEach((function(n){n.key===e&&(n.status=ae)}))})),t}(r,a);return{keyEntities:o.filter((function(e){var n=r.find((function(n){var t=n.key;return e.key===t}));return!n||n.status!==ie||e.status!==oe}))}}}]),l}(h.Component);return c(v,"defaultProps",{component:"div"}),v}(J);export{te as C,A as M,le as a};
