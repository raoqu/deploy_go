import{c as e,e as t,f as n,d as r,h as a,b as o,g as i}from"./@babel_runtime@7.22.15.d775819b.js";import{c as l}from"./classnames@2.3.2.78a47676.js";import{B as u,r as s,f as c}from"./rc-input@1.1.1_react-dom@18.2.0_react@18.2.0.0a2693d3.js";import{A as d,b as f,l as m}from"./rc-util@5.37.0_react-dom@18.2.0_react@18.2.0.5dac6347.js";import{r as p,a as v}from"./react@18.2.0.be237728.js";import{R as g}from"./rc-resize-observer@1.3.1_react-dom@18.2.0_react@18.2.0.218d0dcd.js";var h,b=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],x={};function w(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;h||((h=document.createElement("textarea")).setAttribute("tab-index","-1"),h.setAttribute("aria-hidden","true"),document.body.appendChild(h)),e.getAttribute("wrap")?h.setAttribute("wrap",e.getAttribute("wrap")):h.removeAttribute("wrap");var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&x[n])return x[n];var r=window.getComputedStyle(e),a=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),o=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),i=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),l={sizingStyle:b.map((function(e){return"".concat(e,":").concat(r.getPropertyValue(e))})).join(";"),paddingSize:o,borderSize:i,boxSizing:a};return t&&n&&(x[n]=l),l}(e,t),o=a.paddingSize,i=a.borderSize,l=a.boxSizing,u=a.sizingStyle;h.setAttribute("style","".concat(u,";").concat("\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n")),h.value=e.value||e.placeholder||"";var s,c=void 0,d=void 0,f=h.scrollHeight;if("border-box"===l?f+=i:"content-box"===l&&(f-=o),null!==n||null!==r){h.value=" ";var m=h.scrollHeight-o;null!==n&&(c=m*n,"border-box"===l&&(c=c+o+i),f=Math.max(c,f)),null!==r&&(d=m*r,"border-box"===l&&(d=d+o+i),s=f>d?"":"hidden",f=Math.min(d,f))}var p={height:f,overflowY:s,resize:"none"};return c&&(p.minHeight=c),d&&(p.maxHeight=d),p}var y=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],z=p.forwardRef((function(i,u){var s=i,c=s.prefixCls;s.onPressEnter;var v=s.defaultValue,h=s.value,b=s.autoSize,x=s.onResize,z=s.className,S=s.style,C=s.disabled,A=s.onChange;s.onInternalAutoSize;var E=e(s,y),R=d(v,{value:h,postState:function(e){return null!=e?e:""}}),V=t(R,2),N=V[0],P=V[1],j=p.useRef();p.useImperativeHandle(u,(function(){return{textArea:j.current}}));var F=p.useMemo((function(){return b&&"object"===n(b)?[b.minRows,b.maxRows]:[]}),[b]),T=t(F,2),_=T[0],H=T[1],B=!!b,I=p.useState(2),W=t(I,2),k=W[0],L=W[1],M=p.useState(),D=t(M,2),K=D[0],Y=D[1],X=function(){L(0)};f((function(){B&&X()}),[h,_,H,B]),f((function(){if(0===k)L(1);else if(1===k){var e=w(j.current,!1,_,H);L(2),Y(e)}else!function(){try{if(document.activeElement===j.current){var e=j.current,t=e.selectionStart,n=e.selectionEnd,r=e.scrollTop;j.current.setSelectionRange(t,n),j.current.scrollTop=r}}catch(a){}}()}),[k]);var q=p.useRef(),G=function(){m.cancel(q.current)};p.useEffect((function(){return G}),[]);var J=B?K:null,O=r(r({},S),J);return 0!==k&&1!==k||(O.overflowY="hidden",O.overflowX="hidden"),p.createElement(g,{onResize:function(e){2===k&&(null==x||x(e),b&&(G(),q.current=m((function(){X()}))))},disabled:!(b||x)},p.createElement("textarea",a({},E,{ref:j,style:O,className:l(c,z,o({},"".concat(c,"-disabled"),C)),disabled:C,value:N,onChange:function(e){P(e.target.value),null==A||A(e)}})))})),S=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","className","style","disabled","hidden","classNames","styles","onResize"];function C(e,t){return i(e||"").slice(0,t).join("")}function A(e,t,n,r){var a=n;return e?a=C(n,r):i(t||"").length<n.length&&i(n||"").length>r&&(a=t),a}var E=v.forwardRef((function(f,m){var g,h=f.defaultValue,b=f.value,x=f.onFocus,w=f.onBlur,y=f.onChange,E=f.allowClear,R=f.maxLength,V=f.onCompositionStart,N=f.onCompositionEnd,P=f.suffix,j=f.prefixCls,F=void 0===j?"rc-textarea":j,T=f.classes,_=f.showCount,H=f.className,B=f.style,I=f.disabled,W=f.hidden,k=f.classNames,L=f.styles,M=f.onResize,D=e(f,S),K=d(h,{value:b,defaultValue:h}),Y=t(K,2),X=Y[0],q=Y[1],G=p.useRef(null),J=v.useState(!1),O=t(J,2),Q=O[0],U=O[1],Z=v.useState(!1),$=t(Z,2),ee=$[0],te=$[1],ne=v.useRef(),re=v.useRef(0),ae=v.useState(null),oe=t(ae,2),ie=oe[0],le=oe[1],ue=function(){var e;null===(e=G.current)||void 0===e||e.textArea.focus()};p.useImperativeHandle(m,(function(){return{resizableTextArea:G.current,focus:ue,blur:function(){var e;null===(e=G.current)||void 0===e||e.textArea.blur()}}})),p.useEffect((function(){U((function(e){return!I&&e}))}),[I]);var se=Number(R)>0,ce=c(X);!ee&&se&&null==b&&(ce=C(ce,R));var de,fe=P;if(_){var me=i(ce).length;de="object"===n(_)?_.formatter({value:ce,count:me,maxLength:R}):"".concat(me).concat(se?" / ".concat(R):""),fe=v.createElement(v.Fragment,null,fe,v.createElement("span",{className:l("".concat(F,"-data-count"),null==k?void 0:k.count),style:null==L?void 0:L.count},de))}var pe=!D.autoSize&&!_&&!E;return v.createElement(u,{value:ce,allowClear:E,handleReset:function(e){var t;q(""),ue(),s(null===(t=G.current)||void 0===t?void 0:t.textArea,e,y)},suffix:fe,prefixCls:F,classes:{affixWrapper:l(null==T?void 0:T.affixWrapper,(g={},o(g,"".concat(F,"-show-count"),_),o(g,"".concat(F,"-textarea-allow-clear"),E),g))},disabled:I,focused:Q,className:H,style:r(r({},B),ie&&!pe?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":"string"==typeof de?de:void 0}},hidden:W,inputElement:v.createElement(z,a({},D,{onKeyDown:function(e){var t=D.onPressEnter,n=D.onKeyDown;"Enter"===e.key&&t&&t(e),null==n||n(e)},onChange:function(e){var t=e.target.value;!ee&&se&&(t=A(e.target.selectionStart>=R+1||e.target.selectionStart===t.length||!e.target.selectionStart,X,t,R));q(t),s(e.currentTarget,e,y,t)},onFocus:function(e){U(!0),null==x||x(e)},onBlur:function(e){U(!1),null==w||w(e)},onCompositionStart:function(e){te(!0),ne.current=X,re.current=e.currentTarget.selectionStart,null==V||V(e)},onCompositionEnd:function(e){te(!1);var t,n=e.currentTarget.value;se&&(n=A(re.current>=R+1||re.current===(null===(t=ne.current)||void 0===t?void 0:t.length),ne.current,n,R));n!==X&&(q(n),s(e.currentTarget,e,y,n)),null==N||N(e)},className:null==k?void 0:k.textarea,style:r(r({},null==L?void 0:L.textarea),{},{resize:null==B?void 0:B.resize}),disabled:I,prefixCls:F,onResize:function(e){var t;null==M||M(e),null!==(t=G.current)&&void 0!==t&&t.textArea.style.height&&le(!0)},ref:G}))})}));export{E as T};
