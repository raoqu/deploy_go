import{b as e,c as t,h as n,d as a,e as r,f as o,g as c}from"./@babel_runtime@7.22.15.d775819b.js";import{r as i}from"./react@18.2.0.be237728.js";import{c as l}from"./classnames@2.3.2.78a47676.js";import{H as u,K as s,h as f,l as d,f as v,o as m,A as b}from"./rc-util@5.37.0_react-dom@18.2.0_react@18.2.0.5dac6347.js";import{C as p}from"./rc-motion@2.9.0_react-dom@18.2.0_react@18.2.0.9878debb.js";import{R as h}from"./rc-resize-observer@1.3.1_react-dom@18.2.0_react@18.2.0.218d0dcd.js";import{D as y}from"./rc-dropdown@4.1.0_react-dom@18.2.0_react@18.2.0.1c03c536.js";import{E as g,M as E}from"./rc-menu@9.10.0_react-dom@18.2.0_react@18.2.0.70c23822.js";const k=i.createContext(null);var x=i.forwardRef((function(e,t){var n=e.prefixCls,a=e.className,r=e.style,o=e.id,c=e.active,u=e.tabKey,s=e.children;return i.createElement("div",{id:o&&"".concat(o,"-panel-").concat(u),role:"tabpanel",tabIndex:c?0:-1,"aria-labelledby":o&&"".concat(o,"-tab-").concat(u),"aria-hidden":!c,style:r,className:l(n,c&&"".concat(n,"-active"),a),ref:t},s)})),C=["key","forceRender","style","className"];function w(r){var o=r.id,c=r.activeKey,u=r.animated,s=r.tabPosition,f=r.destroyInactiveTabPane,d=i.useContext(k),v=d.prefixCls,m=d.tabs,b=u.tabPane,h="".concat(v,"-tabpane");return i.createElement("div",{className:l("".concat(v,"-content-holder"))},i.createElement("div",{className:l("".concat(v,"-content"),"".concat(v,"-content-").concat(s),e({},"".concat(v,"-content-animated"),b))},m.map((function(e){var r=e.key,s=e.forceRender,d=e.style,v=e.className,m=t(e,C),y=r===c;return i.createElement(p,n({key:r,visible:y,forceRender:s,removeOnLeave:!!f,leavedClassName:"".concat(h,"-hidden")},u.tabPaneMotion),(function(e,t){var c=e.style,u=e.className;return i.createElement(x,n({},m,{prefixCls:h,id:o,tabKey:r,animated:b,active:y,style:a(a({},d),c),className:l(v,u),ref:t}))}))}))))}var N={width:0,height:0,left:0,top:0};function P(e,t){var n=i.useRef(e),a=i.useState({}),o=r(a,2)[1];return[n.current,function(e){var a="function"==typeof e?e(n.current):e;a!==n.current&&t(a,n.current),n.current=a,o({})}]}var T=.1,R=.01,S=20,M=Math.pow(.995,S);function I(e){var t=i.useState(0),n=r(t,2),a=n[0],o=n[1],c=i.useRef(0),l=i.useRef();return l.current=e,u((function(){var e;null===(e=l.current)||void 0===e||e.call(l)}),[a]),function(){c.current===a&&(c.current+=1,o(c.current))}}var B={width:0,height:0,left:0,top:0,right:0};function L(e){var t;return e instanceof Map?(t={},e.forEach((function(e,n){t[n]=e}))):t=e,JSON.stringify(t)}var D="TABS_DQ";function A(e){return String(e).replace(/"/g,D)}function _(e,t,n,a){return!(!n||a||!1===e||void 0===e&&(!1===t||null===t))}function j(e,t){var n=e.prefixCls,a=e.editable,r=e.locale,o=e.style;return a&&!1!==a.showAdd?i.createElement("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:o,"aria-label":(null==r?void 0:r.addAriaLabel)||"Add tab",onClick:function(e){a.onEdit("add",{event:e})}},a.addIcon||"+"):null}const K=i.forwardRef(j);var W=i.forwardRef((function(e,t){var n,a=e.position,r=e.prefixCls,c=e.extra;if(!c)return null;var l={};return"object"!==o(c)||i.isValidElement(c)?l.right=c:l=c,"right"===a&&(n=l.right),"left"===a&&(n=l.left),n?i.createElement("div",{className:"".concat(r,"-extra-content"),ref:t},n):null}));function G(t,n){var a=t.prefixCls,o=t.id,c=t.tabs,u=t.locale,f=t.mobile,d=t.moreIcon,v=void 0===d?"More":d,m=t.moreTransitionName,b=t.style,p=t.className,h=t.editable,k=t.tabBarGutter,x=t.rtl,C=t.removeAriaLabel,w=t.onTabClick,N=t.getPopupContainer,P=t.popupClassName,T=i.useState(!1),R=r(T,2),S=R[0],M=R[1],I=i.useState(null),B=r(I,2),L=B[0],D=B[1],A="".concat(o,"-more-popup"),j="".concat(a,"-dropdown"),W=null!==L?"".concat(A,"-").concat(L):null,G=null==u?void 0:u.dropdownAriaLabel;var V=i.createElement(g,{onClick:function(e){var t=e.key,n=e.domEvent;w(t,n),M(!1)},prefixCls:"".concat(j,"-menu"),id:A,tabIndex:-1,role:"listbox","aria-activedescendant":W,selectedKeys:[L],"aria-label":void 0!==G?G:"expanded dropdown"},c.map((function(e){var t=e.closable,n=e.disabled,a=e.closeIcon,r=e.key,c=e.label,l=_(t,a,h,n);return i.createElement(E,{key:r,id:"".concat(A,"-").concat(r),role:"option","aria-controls":o&&"".concat(o,"-panel-").concat(r),disabled:n},i.createElement("span",null,c),l&&i.createElement("button",{type:"button","aria-label":C||"remove",tabIndex:0,className:"".concat(j,"-menu-item-remove"),onClick:function(e){e.stopPropagation(),function(e,t){e.preventDefault(),e.stopPropagation(),h.onEdit("remove",{key:t,event:e})}(e,r)}},a||h.removeIcon||"×"))})));function F(e){for(var t=c.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===L}))||0,a=t.length,r=0;r<a;r+=1){var o=t[n=(n+e+a)%a];if(!o.disabled)return void D(o.key)}}i.useEffect((function(){var e=document.getElementById(W);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[L]),i.useEffect((function(){S||D(null)}),[S]);var O=e({},x?"marginRight":"marginLeft",k);c.length||(O.visibility="hidden",O.order=1);var z=l(e({},"".concat(j,"-rtl"),x)),H=f?null:i.createElement(y,{prefixCls:j,overlay:V,trigger:["hover"],visible:!!c.length&&S,transitionName:m,onVisibleChange:M,overlayClassName:l(z,P),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:N},i.createElement("button",{type:"button",className:"".concat(a,"-nav-more"),style:O,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":A,id:"".concat(o,"-more"),"aria-expanded":S,onKeyDown:function(e){var t=e.which;if(S)switch(t){case s.UP:F(-1),e.preventDefault();break;case s.DOWN:F(1),e.preventDefault();break;case s.ESC:M(!1);break;case s.SPACE:case s.ENTER:null!==L&&w(L,e)}else[s.DOWN,s.SPACE,s.ENTER].includes(t)&&(M(!0),e.preventDefault())}},v));return i.createElement("div",{className:l("".concat(a,"-nav-operations"),p),style:b,ref:n},H,i.createElement(K,{prefixCls:a,locale:u,editable:h}))}const V=i.memo(i.forwardRef(G),(function(e,t){return t.tabMoving}));function F(t){var n,a=t.prefixCls,r=t.id,o=t.active,c=t.tab,u=c.key,f=c.label,d=c.disabled,v=c.closeIcon,m=t.closable,b=t.renderWrapper,p=t.removeAriaLabel,h=t.editable,y=t.onClick,g=t.onFocus,E=t.style,k="".concat(a,"-tab"),x=_(m,v,h,d);function C(e){d||y(e)}var w=i.createElement("div",{key:u,"data-node-key":A(u),className:l(k,(n={},e(n,"".concat(k,"-with-remove"),x),e(n,"".concat(k,"-active"),o),e(n,"".concat(k,"-disabled"),d),n)),style:E,onClick:C},i.createElement("div",{role:"tab","aria-selected":o,id:r&&"".concat(r,"-tab-").concat(u),className:"".concat(k,"-btn"),"aria-controls":r&&"".concat(r,"-panel-").concat(u),"aria-disabled":d,tabIndex:d?null:0,onClick:function(e){e.stopPropagation(),C(e)},onKeyDown:function(e){[s.SPACE,s.ENTER].includes(e.which)&&(e.preventDefault(),C(e))},onFocus:g},f),x&&i.createElement("button",{type:"button","aria-label":p||"remove",tabIndex:0,className:"".concat(k,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),h.onEdit("remove",{key:u,event:t})}},v||h.removeIcon||"×"));return b?b(w):w}var O=function(e){var t=e.current||{},n=t.offsetWidth,a=void 0===n?0:n,r=t.offsetHeight;return[a,void 0===r?0:r]},z=function(e,t){return e[t?0:1]};function H(t,o){var u,s=i.useContext(k),m=s.prefixCls,b=s.tabs,p=t.className,y=t.style,g=t.id,E=t.animated,x=t.activeKey,C=t.rtl,w=t.extra,D=t.editable,_=t.locale,j=t.tabPosition,G=t.tabBarGutter,H=t.children,X=t.onTabClick,Y=t.onTabScroll,U=i.useRef(),q=i.useRef(),J=i.useRef(),Q=i.useRef(),Z=i.useRef(),$=i.useRef(),ee=i.useRef(),te="top"===j||"bottom"===j,ne=P(0,(function(e,t){te&&Y&&Y({direction:e>t?"left":"right"})})),ae=r(ne,2),re=ae[0],oe=ae[1],ce=P(0,(function(e,t){!te&&Y&&Y({direction:e>t?"top":"bottom"})})),ie=r(ce,2),le=ie[0],ue=ie[1],se=i.useState([0,0]),fe=r(se,2),de=fe[0],ve=fe[1],me=i.useState([0,0]),be=r(me,2),pe=be[0],he=be[1],ye=i.useState([0,0]),ge=r(ye,2),Ee=ge[0],ke=ge[1],xe=i.useState([0,0]),Ce=r(xe,2),we=Ce[0],Ne=Ce[1],Pe=function(e){var t=i.useRef([]),n=i.useState({}),a=r(n,2)[1],o=i.useRef("function"==typeof e?e():e),c=I((function(){var e=o.current;t.current.forEach((function(t){e=t(e)})),t.current=[],o.current=e,a({})}));return[o.current,function(e){t.current.push(e),c()}]}(new Map),Te=r(Pe,2),Re=Te[0],Se=Te[1],Me=function(e,t,n){return i.useMemo((function(){for(var n,r=new Map,o=t.get(null===(n=e[0])||void 0===n?void 0:n.key)||N,c=o.left+o.width,i=0;i<e.length;i+=1){var l,u=e[i].key,s=t.get(u);s||(s=t.get(null===(l=e[i-1])||void 0===l?void 0:l.key)||N);var f=r.get(u)||a({},s);f.right=c-f.left-f.width,r.set(u,f)}return r}),[e.map((function(e){return e.key})).join("_"),t,n])}(b,Re,pe[0]),Ie=z(de,te),Be=z(pe,te),Le=z(Ee,te),De=z(we,te),Ae=Ie<Be+Le,_e=Ae?Ie-De:Ie-Le,je="".concat(m,"-nav-operations-hidden"),Ke=0,We=0;function Ge(e){return e<Ke?Ke:e>We?We:e}te&&C?(Ke=0,We=Math.max(0,Be-_e)):(Ke=Math.min(0,_e-Be),We=0);var Ve=i.useRef(),Fe=i.useState(),Oe=r(Fe,2),ze=Oe[0],He=Oe[1];function Xe(){He(Date.now())}function Ye(){window.clearTimeout(Ve.current)}!function(e,t){var n=i.useState(),a=r(n,2),o=a[0],c=a[1],l=i.useState(0),u=r(l,2),s=u[0],f=u[1],d=i.useState(0),v=r(d,2),m=v[0],b=v[1],p=i.useState(),h=r(p,2),y=h[0],g=h[1],E=i.useRef(),k=i.useRef(),x=i.useRef(null);x.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,a=t.screenY;c({x:n,y:a}),window.clearInterval(E.current)},onTouchMove:function(e){if(o){e.preventDefault();var n=e.touches[0],a=n.screenX,r=n.screenY;c({x:a,y:r});var i=a-o.x,l=r-o.y;t(i,l);var u=Date.now();f(u),b(u-s),g({x:i,y:l})}},onTouchEnd:function(){if(o&&(c(null),g(null),y)){var e=y.x/m,n=y.y/m,a=Math.abs(e),r=Math.abs(n);if(Math.max(a,r)<T)return;var i=e,l=n;E.current=window.setInterval((function(){Math.abs(i)<R&&Math.abs(l)<R?window.clearInterval(E.current):t((i*=M)*S,(l*=M)*S)}),S)}},onWheel:function(e){var n=e.deltaX,a=e.deltaY,r=0,o=Math.abs(n),c=Math.abs(a);o===c?r="x"===k.current?n:a:o>c?(r=n,k.current="x"):(r=a,k.current="y"),t(-r,-r)&&e.preventDefault()}},i.useEffect((function(){function t(e){x.current.onTouchMove(e)}function n(e){x.current.onTouchEnd(e)}return document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",n,{passive:!1}),e.current.addEventListener("touchstart",(function(e){x.current.onTouchStart(e)}),{passive:!1}),e.current.addEventListener("wheel",(function(e){x.current.onWheel(e)})),function(){document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)}}),[])}(Q,(function(e,t){function n(e,t){e((function(e){return Ge(e+t)}))}return!!Ae&&(te?n(oe,e):n(ue,t),Ye(),Xe(),!0)})),i.useEffect((function(){return Ye(),ze&&(Ve.current=window.setTimeout((function(){He(0)}),100)),Ye}),[ze]);var Ue=function(e,t,n,a,r,o,c){var l,u,s,f=c.tabs,d=c.tabPosition,v=c.rtl;return["top","bottom"].includes(d)?(l="width",u=v?"right":"left",s=Math.abs(n)):(l="height",u="top",s=-n),i.useMemo((function(){if(!f.length)return[0,0];for(var n=f.length,a=n,r=0;r<n;r+=1){var o=e.get(f[r].key)||B;if(o[u]+o[l]>s+t){a=r-1;break}}for(var c=0,i=n-1;i>=0;i-=1)if((e.get(f[i].key)||B)[u]<s){c=i+1;break}return c>=a?[0,0]:[c,a]}),[e,t,a,r,o,s,d,f.map((function(e){return e.key})).join("_"),v])}(Me,_e,te?re:le,Be,Le,De,a(a({},t),{},{tabs:b})),qe=r(Ue,2),Je=qe[0],Qe=qe[1],Ze=f((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=Me.get(e)||{width:0,height:0,left:0,right:0,top:0};if(te){var n=re;C?t.right<re?n=t.right:t.right+t.width>re+_e&&(n=t.right+t.width-_e):t.left<-re?n=-t.left:t.left+t.width>-re+_e&&(n=-(t.left+t.width-_e)),ue(0),oe(Ge(n))}else{var a=le;t.top<-le?a=-t.top:t.top+t.height>-le+_e&&(a=-(t.top+t.height-_e)),oe(0),ue(Ge(a))}})),$e={};"top"===j||"bottom"===j?$e[C?"marginRight":"marginLeft"]=G:$e.marginTop=G;var et=b.map((function(e,t){var n=e.key;return i.createElement(F,{id:g,prefixCls:m,key:n,tab:e,style:0===t?void 0:$e,closable:e.closable,editable:D,active:n===x,renderWrapper:H,removeAriaLabel:null==_?void 0:_.removeAriaLabel,onClick:function(e){X(n,e)},onFocus:function(){Ze(n),Xe(),Q.current&&(C||(Q.current.scrollLeft=0),Q.current.scrollTop=0)}})})),tt=function(){return Se((function(){var e=new Map;return b.forEach((function(t){var n,a=t.key,r=null===(n=Z.current)||void 0===n?void 0:n.querySelector('[data-node-key="'.concat(A(a),'"]'));r&&e.set(a,{width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft,top:r.offsetTop})})),e}))};i.useEffect((function(){tt()}),[b.map((function(e){return e.key})).join("_")]);var nt=I((function(){var e=O(U),t=O(q),n=O(J);ve([e[0]-t[0]-n[0],e[1]-t[1]-n[1]]);var a=O(ee);ke(a);var r=O($);Ne(r);var o=O(Z);he([o[0]-a[0],o[1]-a[1]]),tt()})),at=b.slice(0,Je),rt=b.slice(Qe+1),ot=[].concat(c(at),c(rt)),ct=i.useState(),it=r(ct,2),lt=it[0],ut=it[1],st=Me.get(x),ft=i.useRef();function dt(){d.cancel(ft.current)}i.useEffect((function(){var e={};return st&&(te?(C?e.right=st.right:e.left=st.left,e.width=st.width):(e.top=st.top,e.height=st.height)),dt(),ft.current=d((function(){ut(e)})),dt}),[st,te,C]),i.useEffect((function(){Ze()}),[x,Ke,We,L(st),L(Me),te]),i.useEffect((function(){nt()}),[C]);var vt,mt,bt,pt,ht=!!ot.length,yt="".concat(m,"-nav-wrap");return te?C?(mt=re>0,vt=re!==We):(vt=re<0,mt=re!==Ke):(bt=le<0,pt=le!==Ke),i.createElement(h,{onResize:nt},i.createElement("div",{ref:v(o,U),role:"tablist",className:l("".concat(m,"-nav"),p),style:y,onKeyDown:function(){Xe()}},i.createElement(W,{ref:q,position:"left",extra:w,prefixCls:m}),i.createElement("div",{className:l(yt,(u={},e(u,"".concat(yt,"-ping-left"),vt),e(u,"".concat(yt,"-ping-right"),mt),e(u,"".concat(yt,"-ping-top"),bt),e(u,"".concat(yt,"-ping-bottom"),pt),u)),ref:Q},i.createElement(h,{onResize:nt},i.createElement("div",{ref:Z,className:"".concat(m,"-nav-list"),style:{transform:"translate(".concat(re,"px, ").concat(le,"px)"),transition:ze?"none":void 0}},et,i.createElement(K,{ref:ee,prefixCls:m,locale:_,editable:D,style:a(a({},0===et.length?void 0:$e),{},{visibility:ht?"hidden":null})}),i.createElement("div",{className:l("".concat(m,"-ink-bar"),e({},"".concat(m,"-ink-bar-animated"),E.inkBar)),style:lt})))),i.createElement(V,n({},t,{removeAriaLabel:null==_?void 0:_.removeAriaLabel,ref:$,prefixCls:m,tabs:ot,className:!ht&&je,tabMoving:!!ze})),i.createElement(W,{ref:J,position:"right",extra:w,prefixCls:m})))}const X=i.forwardRef(H);var Y=["renderTabBar"],U=["label","key"];function q(e){var r=e.renderTabBar,o=t(e,Y),c=i.useContext(k).tabs;return r?r(a(a({},o),{},{panes:c.map((function(e){var a=e.label,r=e.key,o=t(e,U);return i.createElement(x,n({tab:a,key:r,tabKey:r},o))}))}),X):i.createElement(X,o)}var J=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName"],Q=0;function Z(c,u){var s,f=c.id,d=c.prefixCls,v=void 0===d?"rc-tabs":d,p=c.className,h=c.items,y=c.direction,g=c.activeKey,E=c.defaultActiveKey,x=c.editable,C=c.animated,N=c.tabPosition,P=void 0===N?"top":N,T=c.tabBarGutter,R=c.tabBarStyle,S=c.tabBarExtraContent,M=c.locale,I=c.moreIcon,B=c.moreTransitionName,L=c.destroyInactiveTabPane,D=c.renderTabBar,A=c.onChange,_=c.onTabClick,j=c.onTabScroll,K=c.getPopupContainer,W=c.popupClassName,G=t(c,J),V=i.useMemo((function(){return(h||[]).filter((function(e){return e&&"object"===o(e)&&"key"in e}))}),[h]),F="rtl"===y,O=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{inkBar:!0,tabPane:!1};return(e=!1===t?{inkBar:!1,tabPane:!1}:!0===t?{inkBar:!0,tabPane:!1}:a({inkBar:!0},"object"===o(t)?t:{})).tabPaneMotion&&void 0===e.tabPane&&(e.tabPane=!0),!e.tabPaneMotion&&e.tabPane&&(e.tabPane=!1),e}(C),z=i.useState(!1),H=r(z,2),X=H[0],Y=H[1];i.useEffect((function(){Y(m())}),[]);var U=b((function(){var e;return null===(e=V[0])||void 0===e?void 0:e.key}),{value:g,defaultValue:E}),Z=r(U,2),$=Z[0],ee=Z[1],te=i.useState((function(){return V.findIndex((function(e){return e.key===$}))})),ne=r(te,2),ae=ne[0],re=ne[1];i.useEffect((function(){var e,t=V.findIndex((function(e){return e.key===$}));-1===t&&(t=Math.max(0,Math.min(ae,V.length-1)),ee(null===(e=V[t])||void 0===e?void 0:e.key));re(t)}),[V.map((function(e){return e.key})).join("_"),$,ae]);var oe=b(null,{value:f}),ce=r(oe,2),ie=ce[0],le=ce[1];i.useEffect((function(){f||(le("rc-tabs-".concat(Q)),Q+=1)}),[]);var ue={id:ie,activeKey:$,animated:O,tabPosition:P,rtl:F,mobile:X},se=a(a({},ue),{},{editable:x,locale:M,moreIcon:I,moreTransitionName:B,tabBarGutter:T,onTabClick:function(e,t){null==_||_(e,t);var n=e!==$;ee(e),n&&(null==A||A(e))},onTabScroll:j,extra:S,style:R,panes:null,getPopupContainer:K,popupClassName:W});return i.createElement(k.Provider,{value:{tabs:V,prefixCls:v}},i.createElement("div",n({ref:u,id:f,className:l(v,"".concat(v,"-").concat(P),(s={},e(s,"".concat(v,"-mobile"),X),e(s,"".concat(v,"-editable"),x),e(s,"".concat(v,"-rtl"),F),s),p)},G),undefined,i.createElement(q,n({},se,{renderTabBar:D})),i.createElement(w,n({destroyInactiveTabPane:L},ue,{animated:O}))))}var $=i.forwardRef(Z);export{$ as F};
