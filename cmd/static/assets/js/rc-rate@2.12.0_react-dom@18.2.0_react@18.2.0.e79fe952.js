import{c as e,e as n,b as a,h as t}from"./@babel_runtime@7.22.15.d775819b.js";import{c as o}from"./classnames@2.3.2.78a47676.js";import{K as r,A as l,C as c}from"./rc-util@5.37.0_react-dom@18.2.0_react@18.2.0.5dac6347.js";import{a as u,r as i}from"./react@18.2.0.be237728.js";function f(e,n){var a=e.disabled,t=e.prefixCls,l=e.character,c=e.characterRender,i=e.index,f=e.count,d=e.value,s=e.allowHalf,v=e.focused,m=e.onHover,p=e.onClick,b=i+1,w=new Set([t]);0===d&&0===i&&v?w.add("".concat(t,"-focused")):s&&d+.5>=b&&d<b?(w.add("".concat(t,"-half")),w.add("".concat(t,"-active")),v&&w.add("".concat(t,"-focused"))):(b<=d?w.add("".concat(t,"-full")):w.add("".concat(t,"-zero")),b===d&&v&&w.add("".concat(t,"-focused")));var C="function"==typeof l?l(e):l,h=u.createElement("li",{className:o(Array.from(w)),ref:n},u.createElement("div",{onClick:a?null:function(e){p(e,i)},onKeyDown:a?null:function(e){e.keyCode===r.ENTER&&p(e,i)},onMouseMove:a?null:function(e){m(e,i)},role:"radio","aria-checked":d>i?"true":"false","aria-posinset":i+1,"aria-setsize":f,tabIndex:a?-1:0},u.createElement("div",{className:"".concat(t,"-first")},C),u.createElement("div",{className:"".concat(t,"-second")},C)));return c&&(h=c(h,e)),h}const d=u.forwardRef(f);var s=["prefixCls","className","defaultValue","value","count","allowHalf","allowClear","character","characterRender","disabled","direction","tabIndex","autoFocus","onHoverChange","onChange","onFocus","onBlur","onKeyDown","onMouseLeave"];function v(f,v){var m,p,b=f.prefixCls,w=void 0===b?"rc-rate":b,C=f.className,h=f.defaultValue,y=f.value,E=f.count,R=void 0===E?5:E,x=f.allowHalf,H=void 0!==x&&x,g=f.allowClear,D=void 0===g||g,L=f.character,k=void 0===L?"â˜…":L,F=f.characterRender,I=f.disabled,N=f.direction,T=void 0===N?"ltr":N,K=f.tabIndex,M=void 0===K?0:K,j=f.autoFocus,B=f.onHoverChange,A=f.onChange,S=f.onFocus,V=f.onBlur,X=f.onKeyDown,_=f.onMouseLeave,z=e(f,s),G=(p=i.useRef({}),[function(e){return p.current[e]},function(e){return function(n){p.current[e]=n}}]),W=n(G,2),O=W[0],q=W[1],J=u.useRef(null),P=function(){var e;I||(null===(e=J.current)||void 0===e||e.focus())};u.useImperativeHandle(v,(function(){return{focus:P,blur:function(){var e;I||(null===(e=J.current)||void 0===e||e.blur())}}}));var Q=l(h||0,{value:y}),U=n(Q,2),Y=U[0],Z=U[1],$=l(null),ee=n($,2),ne=ee[0],ae=ee[1],te=function(e,n){var a,t,o,r,l="rtl"===T,c=e+1;if(H){var u=O(e),i=(t=function(e){var n,a,t=e.ownerDocument,o=t.body,r=t&&t.documentElement,l=e.getBoundingClientRect();return n=l.left,a=l.top,{left:n-=r.clientLeft||o.clientLeft||0,top:a-=r.clientTop||o.clientTop||0}}(a=u),o=a.ownerDocument,r=o.defaultView||o.parentWindow,t.left+=function(e){var n=e.pageXOffset,a="scrollLeft";if("number"!=typeof n){var t=e.document;"number"!=typeof(n=t.documentElement[a])&&(n=t.body[a])}return n}(r),t.left),f=u.clientWidth;(l&&n-i>f/2||!l&&n-i<f/2)&&(c-=.5)}return c},oe=function(e){Z(e),null==A||A(e)},re=u.useState(!1),le=n(re,2),ce=le[0],ue=le[1],ie=u.useState(null),fe=n(ie,2),de=fe[0],se=fe[1],ve=function(e,n){var a=te(n,e.pageX);a!==ne&&(se(a),ae(null)),null==B||B(a)},me=function(e){I||(se(null),ae(null),null==B||B(void 0)),e&&(null==_||_(e))},pe=function(e,n){var a=te(n,e.pageX),t=!1;D&&(t=a===Y),me(),oe(t?0:a),ae(t?a:null)};u.useEffect((function(){j&&!I&&P()}),[]);var be=new Array(R).fill(0).map((function(e,n){return u.createElement(d,{ref:q(n),index:n,count:R,disabled:I,prefixCls:"".concat(w,"-star"),allowHalf:H,value:null===de?Y:de,onClick:pe,onHover:ve,key:e||n,character:k,characterRender:F,focused:ce})})),we=o(w,C,(a(m={},"".concat(w,"-disabled"),I),a(m,"".concat(w,"-rtl"),"rtl"===T),m));return u.createElement("ul",t({className:we,onMouseLeave:me,tabIndex:I?-1:M,onFocus:I?null:function(){ue(!0),null==S||S()},onBlur:I?null:function(){ue(!1),null==V||V()},onKeyDown:I?null:function(e){var n=e.keyCode,a="rtl"===T,t=Y;n===r.RIGHT&&t<R&&!a?(oe(t+=H?.5:1),e.preventDefault()):n===r.LEFT&&t>0&&!a||n===r.RIGHT&&t>0&&a?(oe(t-=H?.5:1),e.preventDefault()):n===r.LEFT&&t<R&&a&&(oe(t+=H?.5:1),e.preventDefault()),null==X||X(e)},ref:J,role:"radiogroup"},c(z,{aria:!0,data:!0,attr:!0})),be)}const m=u.forwardRef(v);export{m as R};
