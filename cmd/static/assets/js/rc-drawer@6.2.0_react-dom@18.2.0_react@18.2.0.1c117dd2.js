import{h as e,d as n,e as t,b as o}from"./@babel_runtime@7.22.15.d775819b.js";import{r as a}from"./react@18.2.0.be237728.js";import{P as r}from"./@rc-component_portal@1.1.2_react-dom@18.2.0_react@18.2.0.91f09b50.js";import{d as l,C as s,K as c,b as i}from"./rc-util@5.37.0_react-dom@18.2.0_react@18.2.0.5dac6347.js";import{c as u}from"./classnames@2.3.2.78a47676.js";import{C as d}from"./rc-motion@2.9.0_react-dom@18.2.0_react@18.2.0.9878debb.js";var v=a.createContext(null),f=function(t){var o=t.prefixCls,r=t.className,l=t.style,s=t.children,c=t.containerRef,i={onMouseEnter:t.onMouseEnter,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave,onClick:t.onClick,onKeyDown:t.onKeyDown,onKeyUp:t.onKeyUp};return a.createElement(a.Fragment,null,a.createElement("div",e({className:u("".concat(o,"-content"),r),style:n({},l),"aria-modal":"true",role:"dialog",ref:c},i),s))};function m(e){return"string"==typeof e&&String(Number(e))===e?(l(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var p={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function y(r,l){var i,y,h,C,k=r.prefixCls,b=r.open,E=r.placement,w=r.inline,M=r.push,g=r.forceRender,x=r.autoFocus,K=r.keyboard,N=r.rootClassName,S=r.rootStyle,D=r.zIndex,O=r.className,R=r.style,L=r.motion,_=r.width,I=r.height,j=r.children,U=r.contentWrapperStyle,F=r.mask,P=r.maskClosable,z=r.maskMotion,A=r.maskClassName,B=r.maskStyle,T=r.afterOpenChange,X=r.onClose,Y=r.onMouseEnter,H=r.onMouseOver,V=r.onMouseLeave,W=r.onClick,q=r.onKeyDown,G=r.onKeyUp,J=a.useRef(),Q=a.useRef(),Z=a.useRef();a.useImperativeHandle(l,(function(){return J.current}));a.useEffect((function(){var e;b&&x&&(null===(e=J.current)||void 0===e||e.focus({preventScroll:!0}))}),[b]);var $=a.useState(!1),ee=t($,2),ne=ee[0],te=ee[1],oe=a.useContext(v),ae=null!==(i=null!==(y=null===(h=!1===M?{distance:0}:!0===M?{}:M||{})||void 0===h?void 0:h.distance)&&void 0!==y?y:null==oe?void 0:oe.pushDistance)&&void 0!==i?i:180,re=a.useMemo((function(){return{pushDistance:ae,push:function(){te(!0)},pull:function(){te(!1)}}}),[ae]);a.useEffect((function(){var e,n;b?null==oe||null===(e=oe.push)||void 0===e||e.call(oe):null==oe||null===(n=oe.pull)||void 0===n||n.call(oe)}),[b]),a.useEffect((function(){return function(){var e;null==oe||null===(e=oe.pull)||void 0===e||e.call(oe)}}),[]);var le=F&&a.createElement(d,e({key:"mask"},z,{visible:b}),(function(e,t){var o=e.className,r=e.style;return a.createElement("div",{className:u("".concat(k,"-mask"),o,A),style:n(n({},r),B),onClick:P&&b?X:void 0,ref:t})})),se="function"==typeof L?L(E):L,ce={};if(ne&&ae)switch(E){case"top":ce.transform="translateY(".concat(ae,"px)");break;case"bottom":ce.transform="translateY(".concat(-ae,"px)");break;case"left":ce.transform="translateX(".concat(ae,"px)");break;default:ce.transform="translateX(".concat(-ae,"px)")}"left"===E||"right"===E?ce.width=m(_):ce.height=m(I);var ie={onMouseEnter:Y,onMouseOver:H,onMouseLeave:V,onClick:W,onKeyDown:q,onKeyUp:G},ue=a.createElement(d,e({key:"panel"},se,{visible:b,forceRender:g,onVisibleChanged:function(e){null==T||T(e)},removeOnLeave:!1,leavedClassName:"".concat(k,"-content-wrapper-hidden")}),(function(t,o){var l=t.className,c=t.style;return a.createElement("div",e({className:u("".concat(k,"-content-wrapper"),l),style:n(n(n({},ce),c),U)},s(r,{data:!0})),a.createElement(f,e({containerRef:o,prefixCls:k,className:O,style:R},ie),j))})),de=n({},S);return D&&(de.zIndex=D),a.createElement(v.Provider,{value:re},a.createElement("div",{className:u(k,"".concat(k,"-").concat(E),N,(C={},o(C,"".concat(k,"-open"),b),o(C,"".concat(k,"-inline"),w),C)),style:de,tabIndex:-1,ref:J,onKeyDown:function(e){var n=e.keyCode,t=e.shiftKey;switch(n){case c.TAB:var o;if(n===c.TAB)if(t||document.activeElement!==Z.current){if(t&&document.activeElement===Q.current){var a;null===(a=Z.current)||void 0===a||a.focus({preventScroll:!0})}}else null===(o=Q.current)||void 0===o||o.focus({preventScroll:!0});break;case c.ESC:X&&K&&(e.stopPropagation(),X(e))}}},le,a.createElement("div",{tabIndex:0,ref:Q,style:p,"aria-hidden":"true","data-sentinel":"start"}),ue,a.createElement("div",{tabIndex:0,ref:Z,style:p,"aria-hidden":"true","data-sentinel":"end"})))}var h=a.forwardRef(y),C=function(e){var o=e.open,l=void 0!==o&&o,s=e.prefixCls,c=void 0===s?"rc-drawer":s,u=e.placement,d=void 0===u?"right":u,v=e.autoFocus,f=void 0===v||v,m=e.keyboard,p=void 0===m||m,y=e.width,C=void 0===y?378:y,k=e.mask,b=void 0===k||k,E=e.maskClosable,w=void 0===E||E,M=e.getContainer,g=e.forceRender,x=e.afterOpenChange,K=e.destroyOnClose,N=e.onMouseEnter,S=e.onMouseOver,D=e.onMouseLeave,O=e.onClick,R=e.onKeyDown,L=e.onKeyUp,_=a.useState(!1),I=t(_,2),j=I[0],U=I[1],F=a.useState(!1),P=t(F,2),z=P[0],A=P[1];i((function(){A(!0)}),[]);var B=!!z&&l,T=a.useRef(),X=a.useRef();i((function(){B&&(X.current=document.activeElement)}),[B]);if(!g&&!j&&!B&&K)return null;var Y={onMouseEnter:N,onMouseOver:S,onMouseLeave:D,onClick:O,onKeyDown:R,onKeyUp:L},H=n(n({},e),{},{open:B,prefixCls:c,placement:d,autoFocus:f,keyboard:p,width:C,mask:b,maskClosable:w,inline:!1===M,afterOpenChange:function(e){var n,t;(U(e),null==x||x(e),e||!X.current||(null===(n=T.current)||void 0===n?void 0:n.contains(X.current)))||(null===(t=X.current)||void 0===t||t.focus({preventScroll:!0}))},ref:T},Y);return a.createElement(r,{open:B||g||j,autoDestroy:!1,getContainer:M,autoLock:b&&(B||j)},a.createElement(h,H))};export{C as D};
